(window.webpackJsonp=window.webpackJsonp||[]).push([[1047],{1743:function(a,s,e){"use strict";e.r(s);var t=e(5),r=Object(t.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"flume整合kafka简单配置及操作步骤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#flume整合kafka简单配置及操作步骤"}},[a._v("#")]),a._v(" flume整合kafka简单配置及操作步骤")]),a._v(" "),e("blockquote",[e("ul",[e("li",[a._v("此次操作考虑到是在已经安装服务的基础上进行配置工作 所以安装步骤省略")]),a._v(" "),e("li",[a._v("配置信息中的路径等信息均是根据实际服务器目录记录 使用时可灵活改变对应目录及命令中的IP端口")])])]),a._v(" "),e("h2",{attrs:{id:"创建主题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建主题"}},[a._v("#")]),a._v(" 创建主题")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("/inf_data/kafka_2.11-0.11.0.0/bin/kafka-topics.sh --create --zookeeper 172.27.132.81:3181 --replication-factor 1 --partitions 1 --topic CMCC_PRO_HJDEVICE_SC\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h2",{attrs:{id:"查看主题列表"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看主题列表"}},[a._v("#")]),a._v(" 查看主题列表")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("/inf_data/kafka_2.11-0.11.0.0/bin/kafka-topics.sh --list --zookeeper 172.29.73.51:2181\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h2",{attrs:{id:"通过控制台消费主题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#通过控制台消费主题"}},[a._v("#")]),a._v(" 通过控制台消费主题")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("/inf_data/kafka_2.11-0.11.0.0/bin/kafka-console-consumer.sh --bootstrap-server 172.27.132.83:9200 --topic CMCC_PRO_HJDEVICE_SC --from-beginning\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h2",{attrs:{id:"通过控制台生产消息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#通过控制台生产消息"}},[a._v("#")]),a._v(" 通过控制台生产消息")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("/inf_data/kafka_2.11-0.11.0.0/bin/kafka-console-producer.sh --broker-list 172.27.132.83:9200 --topic \n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h2",{attrs:{id:"删除指定主题-此操作需要kafka配置支持"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除指定主题-此操作需要kafka配置支持"}},[a._v("#")]),a._v(" 删除指定主题 (此操作需要kafka配置支持)")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("/inf_data/kafka_2.11-0.11.0.0/bin/kafka-topics.sh --delete --topic CMCC_PRD_HJDEVICE_SC --zookeeper 172.27.132.81:3181\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h2",{attrs:{id:"查看某个主题的详细信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看某个主题的详细信息"}},[a._v("#")]),a._v(" 查看某个主题的详细信息")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("/inf_data/kafka_2.11-0.11.0.0/bin/kafka-topics.sh --zookeeper 172.27.132.81:3181 --describe --topic CMCC_PRO_HJDEVICE_SC\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("显示结果如下：\n    Topic: CMCC_PRO_HJDEVICE_SC     PartitionCount:12       ReplicationFactor:3     Configs:\n    Topic: CMCC_PRO_HJDEVICE_SC     Partition: 0    \t\tLeader: 2       \t\tReplicas: 2,0,1 Isr: 2,0,1\n    Topic: CMCC_PRO_HJDEVICE_SC     Partition: 1    \t\tLeader: 0       \t\tReplicas: 0,1,2 Isr: 0,1,2\n    Topic: CMCC_PRO_HJDEVICE_SC     Partition: 2    \t\tLeader: 1       \t\tReplicas: 1,2,0 Isr: 1,2,0\n    Topic: CMCC_PRO_HJDEVICE_SC     Partition: 3    \t\tLeader: 2       \t\tReplicas: 2,1,0 Isr: 2,1,0\n    Topic: CMCC_PRO_HJDEVICE_SC     Partition: 4    \t\tLeader: 0       \t\tReplicas: 0,2,1 Isr: 0,2,1\n    Topic: CMCC_PRO_HJDEVICE_SC     Partition: 5    \t\tLeader: 1       \t\tReplicas: 1,0,2 Isr: 1,0,2\n    Topic: CMCC_PRO_HJDEVICE_SC     Partition: 6    \t\tLeader: 2       \t\tReplicas: 2,0,1 Isr: 2,0,1\n    Topic: CMCC_PRO_HJDEVICE_SC     Partition: 7    \t\tLeader: 0       \t\tReplicas: 0,1,2 Isr: 0,1,2\n    Topic: CMCC_PRO_HJDEVICE_SC     Partition: 8    \t\tLeader: 1       \t\tReplicas: 1,2,0 Isr: 1,2,0\n    Topic: CMCC_PRO_HJDEVICE_SC     Partition: 9    \t\tLeader: 2       \t\tReplicas: 2,1,0 Isr: 2,1,0\n    Topic: CMCC_PRO_HJDEVICE_SC     Partition: 10   \t\tLeader: 0       \t\tReplicas: 0,2,1 Isr: 0,2,1\n    Topic: CMCC_PRO_HJDEVICE_SC     Partition: 11   \t\tLeader: 1       \t\tReplicas: 1,0,2 Isr: 1,0,2\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br")])]),e("h2",{attrs:{id:"查询指定主题内消息总数-查询结果作差"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查询指定主题内消息总数-查询结果作差"}},[a._v("#")]),a._v(" 查询指定主题内消息总数 查询结果作差")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("/inf_data/kafka_2.11-0.11.0.0/bin/kafka-run-class.sh kafka.tools.GetOffsetShell --broker-list 172.27.132.83:9200 --topic CMCC_PRO_HJDEVICE_SC --time -1\n/inf_data/kafka_2.11-0.11.0.0/bin/kafka-run-class.sh kafka.tools.GetOffsetShell --broker-list 172.27.132.83:9200 --topic CMCC_PRO_HJDEVICE_SC --time -2\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("h2",{attrs:{id:"查看zookeeper上记录的所有消费组"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看zookeeper上记录的所有消费组"}},[a._v("#")]),a._v(" 查看zookeeper上记录的所有消费组")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("/inf_data/kafka_2.11-0.11.0.0/bin/kafka-consumer-groups.sh --zookeeper 172.27.132.81:3181 --list\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h2",{attrs:{id:"查看指定broker上的所有消息组"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看指定broker上的所有消息组"}},[a._v("#")]),a._v(" 查看指定broker上的所有消息组")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("/inf_data/kafka_2.11-0.11.0.0/bin/kafka-consumer-groups.sh --new-consumer --bootstrap-server 172.27.132.83:9200 --list\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h2",{attrs:{id:"查看主要配置文件如下-此处配置时已根据路径映射-平时配置需要结合flume的配置文件实际目录进行配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看主要配置文件如下-此处配置时已根据路径映射-平时配置需要结合flume的配置文件实际目录进行配置"}},[a._v("#")]),a._v(" 查看主要配置文件如下 （此处配置时已根据路径映射 平时配置需要结合flume的配置文件实际目录进行配置）")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("iwc@hncmccbd70:/inf_data/kafka_2.11-0.11.0.0> cat /inf_data/flume-properties/k2k.properties \n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h2",{attrs:{id:"配置说明-其实主要是这个配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置说明-其实主要是这个配置"}},[a._v("#")]),a._v(" 配置说明（其实主要是这个配置）")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("# 定义这个 agent 中各个组件的名字\na1.sources = r1\na1.sinks = k1\na1.channels = c1\n\n# 描述和配置 source 组件：r1\na1.sources.r1.type = org.apache.flume.source.kafka.KafkaSource\na1.sources.r1.kafka.bootstrap.servers = 172.29.73.33:9092\n# 这里也可以手动指定消费组\n# a1.sources.r1.kafka.consumer.group.id = CMCC_PRO_HJDEVICE_SC_GROUP\na1.sources.r1.kafka.topics = PRD_HJDEVICE_SC\n\n# 拦截器: i1\na1.sources.r1.interceptors = i1\na1.sources.r1.interceptors.i1.type = static\na1.sources.r1.interceptors.i1.key = topic\na1.sources.r1.interceptors.i1.preserveExisting = false\na1.sources.r1.interceptors.i1.value = CMCC_PRO_HJDEVICE_SC\n\n# 描述和配置 sink 组件：k1\na1.sinks.k1.type = org.apache.flume.sink.kafka.KafkaSink\na1.sinks.k1.kafka.bootstrap.servers = 172.27.132.81:9200,172.27.132.82:9200,172.27.132.83:9200\na1.sinks.k1.topic = CMCC_PRO_HJDEVICE_SC\n\n# 描述和配置 channel 组件，此处使用是内存缓存的方式\na1.channels.c1.type = memory\na1.channels.c1.capacity = 10000\na1.channels.c1.transactionCapacity = 1000\n\n# 描述和配置 source channel sink 之间的连接关系\na1.sources.r1.channels = c1\na1.sinks.k1.channel = c1\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br"),e("span",{staticClass:"line-number"},[a._v("15")]),e("br"),e("span",{staticClass:"line-number"},[a._v("16")]),e("br"),e("span",{staticClass:"line-number"},[a._v("17")]),e("br"),e("span",{staticClass:"line-number"},[a._v("18")]),e("br"),e("span",{staticClass:"line-number"},[a._v("19")]),e("br"),e("span",{staticClass:"line-number"},[a._v("20")]),e("br"),e("span",{staticClass:"line-number"},[a._v("21")]),e("br"),e("span",{staticClass:"line-number"},[a._v("22")]),e("br"),e("span",{staticClass:"line-number"},[a._v("23")]),e("br"),e("span",{staticClass:"line-number"},[a._v("24")]),e("br"),e("span",{staticClass:"line-number"},[a._v("25")]),e("br"),e("span",{staticClass:"line-number"},[a._v("26")]),e("br"),e("span",{staticClass:"line-number"},[a._v("27")]),e("br"),e("span",{staticClass:"line-number"},[a._v("28")]),e("br"),e("span",{staticClass:"line-number"},[a._v("29")]),e("br"),e("span",{staticClass:"line-number"},[a._v("30")]),e("br"),e("span",{staticClass:"line-number"},[a._v("31")]),e("br"),e("span",{staticClass:"line-number"},[a._v("32")]),e("br")])]),e("h2",{attrs:{id:"启动脚本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动脚本"}},[a._v("#")]),a._v(" 启动脚本:")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("nohup sh /inf_data/flume-properties/kafka2kafka.sh  &\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h2",{attrs:{id:"查看脚本内容"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看脚本内容"}},[a._v("#")]),a._v(" 查看脚本内容")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("iwc@hncmccbd70:/inf_data/kafka_2.11-0.11.0.0> cat /inf_data/flume-properties/kafka2kafka.sh \n/opt/cloudera/parcels/CDH/lib/flume-ng/bin/flume-ng  agent  -c  /opt/cloudera/parcels/CDH/lib/flume-ng/conf  -f  k2k.properties  -n  a1  ##-Dflume.root.logger=INFO,console\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("h2",{attrs:{id:"注意事项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[a._v("#")]),a._v(" 注意事项：")]),a._v(" "),e("h3",{attrs:{id:"实际工作配置过程中应该根据实际情况进行编写命令和配置内容-针对kafka和flume有相应的一定程度的了解-参阅官方文档明确配置各个参数的含义。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实际工作配置过程中应该根据实际情况进行编写命令和配置内容-针对kafka和flume有相应的一定程度的了解-参阅官方文档明确配置各个参数的含义。"}},[a._v("#")]),a._v(" 实际工作配置过程中应该根据实际情况进行编写命令和配置内容，针对kafka和flume有相应的一定程度的了解，参阅官方文档明确配置各个参数的含义。")]),a._v(" "),e("h2",{attrs:{id:"查询资料"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查询资料"}},[a._v("#")]),a._v(" 查询资料：")]),a._v(" "),e("blockquote",[e("ul",[e("li",[e("a",{attrs:{href:"http://kafka.apachecn.org/quickstart.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Kafka中文官方文档"),e("OutboundLink")],1)]),a._v(" "),e("li",[e("a",{attrs:{href:"http://flume.apache.org/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Flume官网"),e("OutboundLink")],1)]),a._v(" "),e("li",[a._v("以及网络上的资料和视频学习资料（度娘的比较多就不列了）")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);