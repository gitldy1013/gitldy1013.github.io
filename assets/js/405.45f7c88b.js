(window.webpackJsonp=window.webpackJsonp||[]).push([[405],{1101:function(t,r,a){"use strict";a.r(r);var v=a(5),e=Object(v.a)({},(function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"什么是-tidb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是-tidb"}},[t._v("#")]),t._v(" 什么是 TiDB")]),t._v(" "),a("p",[t._v("TiDB 是 PingCAP 公司受 Google Spanner / F1 论文启发而设计的开源分布式 HTAP (Hybrid Transactional and Analytical Processing) 数据库，结合了传统的 RDBMS 和 NoSQL 的最佳特性。TiDB 兼容 MySQL，支持无限的水平扩展，具备强一致性和高可用性。TiDB 的目标是为 OLTP (Online Transactional Processing) 和 OLAP (Online Analytical Processing) 场景提供一站式的解决方案")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://pingcap.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("TiDB 官方网站"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"核心特点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#核心特点"}},[t._v("#")]),t._v(" 核心特点")]),t._v(" "),a("h3",{attrs:{id:"高度兼容-mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#高度兼容-mysql"}},[t._v("#")]),t._v(" 高度兼容 MySQL")]),t._v(" "),a("p",[t._v("大多数情况下，无需修改代码即可从 MySQL 轻松迁移至 TiDB，分库分表后的 MySQL 集群亦可通过 TiDB 工具进行实时迁移")]),t._v(" "),a("h3",{attrs:{id:"水平弹性扩展"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#水平弹性扩展"}},[t._v("#")]),t._v(" 水平弹性扩展")]),t._v(" "),a("p",[t._v("通过简单地增加新节点即可实现 TiDB 的水平扩展，按需扩展吞吐或存储，轻松应对高并发、海量数据场景")]),t._v(" "),a("h3",{attrs:{id:"分布式事务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分布式事务"}},[t._v("#")]),t._v(" 分布式事务")]),t._v(" "),a("p",[t._v("TiDB 100% 支持标准的 ACID 事务")]),t._v(" "),a("h3",{attrs:{id:"真正金融级高可用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#真正金融级高可用"}},[t._v("#")]),t._v(" 真正金融级高可用")]),t._v(" "),a("p",[t._v("相比于传统主从 (M-S) 复制方案，基于 Raft 的多数派选举协议可以提供金融级的 100% 数据强一致性保证，且在不丢失大多数副本的前提下，可以实现故障的自动恢复 (auto-failover)，无需人工介入")]),t._v(" "),a("h3",{attrs:{id:"一站式-htap-解决方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一站式-htap-解决方案"}},[t._v("#")]),t._v(" 一站式 HTAP 解决方案")]),t._v(" "),a("p",[t._v("TiDB 作为典型的 OLTP 行存数据库，同时兼具强大的 OLAP 性能，配合 TiSpark，可提供一站式 HTAP 解决方案，一份存储同时处理 OLTP & OLAP 无需传统繁琐的 ETL 过程")]),t._v(" "),a("h3",{attrs:{id:"云原生-sql-数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#云原生-sql-数据库"}},[t._v("#")]),t._v(" 云原生 SQL 数据库")]),t._v(" "),a("p",[t._v("TiDB 是为云而设计的数据库，同 Kubernetes 深度耦合，支持公有云、私有云和混合云，使部署、配置和维护变得十分简单。TiDB 的设计目标是 100% 的 OLTP 场景和 80% 的 OLAP 场景，更复杂的 OLAP 分析可以通过 TiSpark 项目来完成。 TiDB 对业务没有任何侵入性，能优雅的替换传统的数据库中间件、数据库分库分表等 Sharding 方案。同时它也让开发运维人员不用关注数据库 Scale 的细节问题，专注于业务开发，极大的提升研发的生产力")]),t._v(" "),a("h2",{attrs:{id:"整体架构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#整体架构"}},[t._v("#")]),t._v(" 整体架构")]),t._v(" "),a("p",[t._v("要深入了解 TiDB 的水平扩展和高可用特点，首先需要了解 TiDB 的整体架构。TiDB 集群主要包括三个核心组件：TiDB Server，PD Server 和 TiKV Server。此外，还有用于解决用户复杂 OLAP 需求的 TiSpark 组件。")]),t._v(" "),a("p",[a("img",{attrs:{src:"/leg_img/e2aee990bc0bcb6.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"tidb-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tidb-server"}},[t._v("#")]),t._v(" TiDB Server")]),t._v(" "),a("p",[t._v("TiDB Server 负责接收 SQL 请求，处理 SQL 相关的逻辑，并通过 PD 找到存储计算所需数据的 TiKV 地址，与 TiKV 交互获取数据，最终返回结果。TiDB Server 是无状态的，其本身并不存储数据，只负责计算，可以无限水平扩展，可以通过负载均衡组件（如 LVS、HAProxy 或 F5）对外提供统一的接入地址。")]),t._v(" "),a("h3",{attrs:{id:"pd-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pd-server"}},[t._v("#")]),t._v(" PD Server")]),t._v(" "),a("p",[t._v("Placement Driver (简称 PD) 是整个集群的管理模块，其主要工作有三个：一是存储集群的元信息（某个 Key 存储在哪个 TiKV 节点）；二是对 TiKV 集群进行调度和负载均衡（如数据的迁移、Raft group leader 的迁移等）；三是分配全局唯一且递增的事务 ID。")]),t._v(" "),a("p",[t._v("PD 通过 Raft 协议保证数据的安全性。Raft 的 leader server 负责处理所有操作，其余的 PD server 仅用于保证高可用。建议部署奇数个 PD 节点。")]),t._v(" "),a("h3",{attrs:{id:"tikv-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tikv-server"}},[t._v("#")]),t._v(" TiKV Server")]),t._v(" "),a("p",[t._v("TiKV Server 负责存储数据，从外部看 TiKV 是一个分布式的提供事务的 Key-Value 存储引擎。存储数据的基本单位是 Region，每个 Region 负责存储一个 Key Range（从 StartKey 到 EndKey 的左闭右开区间）的数据，每个 TiKV 节点会负责多个 Region。TiKV 使用 Raft 协议做复制，保持数据的一致性和容灾。副本以 Region 为单位进行管理，不同节点上的多个 Region 构成一个 Raft Group，互为副本。数据在多个 TiKV 之间的负载均衡由 PD 调度，这里也是以 Region 为单位进行调度。")]),t._v(" "),a("h3",{attrs:{id:"tispark"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tispark"}},[t._v("#")]),t._v(" TiSpark")]),t._v(" "),a("p",[t._v("TiSpark 作为 TiDB 中解决用户复杂 OLAP 需求的主要组件，将 Spark SQL 直接运行在 TiDB 存储层上，同时融合 TiKV 分布式集群的优势，并融入大数据社区生态。至此，TiDB 可以通过一套系统，同时支持 OLTP 与 OLAP，免除用户数据同步的烦恼。")]),t._v(" "),a("h2",{attrs:{id:"技术内幕"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#技术内幕"}},[t._v("#")]),t._v(" 技术内幕")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://pingcap.com/blog-cn/tidb-internal-1/",target:"_blank",rel:"noopener noreferrer"}},[t._v("保存数据"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://pingcap.com/blog-cn/tidb-internal-2/",target:"_blank",rel:"noopener noreferrer"}},[t._v("计算-如何做 SQL 运算"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://pingcap.com/blog-cn/tidb-internal-3/",target:"_blank",rel:"noopener noreferrer"}},[t._v("调度-TiDB 集群管理"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"附-扩展阅读"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#附-扩展阅读"}},[t._v("#")]),t._v(" 附：扩展阅读")]),t._v(" "),a("h3",{attrs:{id:"oltp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#oltp"}},[t._v("#")]),t._v(" OLTP")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("基本含义：")]),t._v(" OLTP(Online Transactional Processing)，OLTP 是传统的关系型数据库的主要应用，主要是基本的、日常的事务处理，记录即时的增、删、改、查，比如在银行存取一笔款，就是一个事务交易")]),t._v(" "),a("li",[a("strong",[t._v("实时性：")]),t._v(" OLTP 实时性要求高，OLTP 数据库旨在使事务应用程序仅写入所需的数据，以便尽快处理单个事务")]),t._v(" "),a("li",[a("strong",[t._v("数据量：")]),t._v(" OLTP 数据量不是很大，一般只读 / 写数十条记录，处理简单的事务")]),t._v(" "),a("li",[a("strong",[t._v("用户和系统的面向性：")]),t._v(" OLTP 是面向顾客的，用于事务和查询处理")]),t._v(" "),a("li",[a("strong",[t._v("数据库设计：")]),t._v(" OLTP 采用实体 - 联系 ER 模型和面向应用的数据库设计")])]),t._v(" "),a("h3",{attrs:{id:"olap"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#olap"}},[t._v("#")]),t._v(" OLAP")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("基本含义：")]),t._v(" OLAP(Online Analytical Processing) 即联机分析处理，是数据仓库的核心部心，支持复杂的分析操作，侧重决策支持，并且提供直观易懂的查询结果。典型的应用就是复杂的动态报表系统")]),t._v(" "),a("li",[a("strong",[t._v("实时性：")]),t._v(" OLAP 的实时性要求不是很高，很多应用顶多是每天更新一下数据")]),t._v(" "),a("li",[a("strong",[t._v("数据量：")]),t._v(" OLAP 数据量大，因为 OLAP 支持的是动态查询，所以用户也许要通过将很多数据的统计后才能得到想要知道的信息，例如时间序列分析等等，所以处理的数据量很大")]),t._v(" "),a("li",[a("strong",[t._v("用户和系统的面向性：")]),t._v(" OLAP 是面向市场的，用于数据分析")]),t._v(" "),a("li",[a("strong",[t._v("数据库设计：")]),t._v(" OLAP 采用星型或雪花模型和面向主题的数据库设计")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v("OLTP")]),t._v(" "),a("th",[t._v("OLAP")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("用户")]),t._v(" "),a("td",[t._v("操作人员，低层管理人员")]),t._v(" "),a("td",[t._v("决策人员，高级管理人员")])]),t._v(" "),a("tr",[a("td",[t._v("功能")]),t._v(" "),a("td",[t._v("日常操作处理")]),t._v(" "),a("td",[t._v("分析决策")])]),t._v(" "),a("tr",[a("td",[t._v("DB 设计")]),t._v(" "),a("td",[t._v("面向应用")]),t._v(" "),a("td",[t._v("面向主题")])]),t._v(" "),a("tr",[a("td",[t._v("数据")]),t._v(" "),a("td",[t._v("当前的，最新的细节，二维的，分立的")]),t._v(" "),a("td",[t._v("历史的，聚集的，多维集成的，统一的")])]),t._v(" "),a("tr",[a("td",[t._v("存取")]),t._v(" "),a("td",[t._v("读/写数十条记录")]),t._v(" "),a("td",[t._v("读上百万条记录")])]),t._v(" "),a("tr",[a("td",[t._v("工作单位")]),t._v(" "),a("td",[t._v("简单的事务")]),t._v(" "),a("td",[t._v("复杂的查询")])]),t._v(" "),a("tr",[a("td",[t._v("用户数")]),t._v(" "),a("td",[t._v("上千个")]),t._v(" "),a("td",[t._v("上百个")])]),t._v(" "),a("tr",[a("td",[t._v("DB 大小")]),t._v(" "),a("td",[t._v("100MB-GB")]),t._v(" "),a("td",[t._v("100GB-TB")])])])])])}),[],!1,null,null,null);r.default=e.exports}}]);