(window.webpackJsonp=window.webpackJsonp||[]).push([[365],{1061:function(t,s,a){"use strict";a.r(s);var e=a(5),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"solr-的基本操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#solr-的基本操作"}},[t._v("#")]),t._v(" Solr 的基本操作")]),t._v(" "),a("h2",{attrs:{id:"功能界面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#功能界面"}},[t._v("#")]),t._v(" 功能界面")]),t._v(" "),a("h3",{attrs:{id:"dashboard"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dashboard"}},[t._v("#")]),t._v(" Dashboard")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/1512745071.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"logging"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#logging"}},[t._v("#")]),t._v(" Logging")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/1512745395.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"core-admin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#core-admin"}},[t._v("#")]),t._v(" Core Admin")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/1512745505.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"thread-dump"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#thread-dump"}},[t._v("#")]),t._v(" Thread Dump")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/1512745735.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"core"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#core"}},[t._v("#")]),t._v(" Core")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/1512746145.png",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"分析功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分析功能"}},[t._v("#")]),t._v(" 分析功能")]),t._v(" "),a("h3",{attrs:{id:"修改-managed-schema-配置业务系统字段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改-managed-schema-配置业务系统字段"}},[t._v("#")]),t._v(" 修改 managed-schema 配置业务系统字段")]),t._v(" "),a("p",[t._v("需要用到的业务字段如下：")]),t._v(" "),a("ul",[a("li",[t._v("商品 ID")]),t._v(" "),a("li",[t._v("商品分类 ID")]),t._v(" "),a("li",[t._v("分类名称")]),t._v(" "),a("li",[t._v("商品名称")]),t._v(" "),a("li",[t._v("商品卖点")]),t._v(" "),a("li",[t._v("商品详情")])]),t._v(" "),a("p",[t._v("由于 Solr 中自带 id 字段所以无需添加，其它字段需要手动添加 Solr 字段")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('    # 字段域\n    <field name="tb_item_cid" type="plong" indexed="true" stored="true"/>\n    <field name="tb_item_cname"  type="text_ik" indexed="true" stored="true"/>\n    <field name="tb_item_title"  type="text_ik" indexed="true" stored="true"/>\n    <field name="tb_item_sell_point" type="text_ik" indexed="true" stored="true" />\n    <field name="tb_item_desc" type="text_ik" indexed="true" stored="true" />\n    \n    # 复制域（Solr 的搜索优化功能，将多个字段域复制到一个域里，提高查询效率）\n    <field name="tb_item_keywords" type="text_ik" indexed="true" stored="false" multiValued="true"/>\n    <copyField source="tb_item_cname" dest="tb_item_keywords"/>\n    <copyField source="tb_item_title" dest="tb_item_keywords"/>\n    <copyField source="tb_item_sell_point" dest="tb_item_keywords"/>\n    <copyField source="tb_item_desc" dest="tb_item_keywords"/>\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("p",[a("img",{attrs:{src:"/img/20181107015350.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"复制配置到容器并重启"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#复制配置到容器并重启"}},[t._v("#")]),t._v(" 复制配置到容器并重启")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("    # 复制到容器\n    docker cp managed-schema solr:/opt/solr/server/solr/ik_core/conf\n    \n    # 重启容器\n    docker-compose restart\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h3",{attrs:{id:"分词效果图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分词效果图"}},[t._v("#")]),t._v(" 分词效果图")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/1520889921.png",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"维护功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#维护功能"}},[t._v("#")]),t._v(" 维护功能")]),t._v(" "),a("p",[t._v("维护功能即对数据库的 CRUD 操作")]),t._v(" "),a("h3",{attrs:{id:"添加索引库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加索引库"}},[t._v("#")]),t._v(" 添加索引库")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('    {\n        "id": 536563,\n        "tb_item_cid": 560,\n        "tb_item_cname": "手机",\n        "tb_item_title": "new2 - 阿尔卡特 (OT-927) 炭黑 联通3G手机 双卡双待",\n        "tb_item_sell_point": "清仓！仅北京，武汉仓有货！"\n    }\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("p",[a("img",{attrs:{src:"/img/20181107021450.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"测试查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试查询"}},[t._v("#")]),t._v(" 测试查询")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/20181107021538.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"删除索引库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除索引库"}},[t._v("#")]),t._v(" 删除索引库")]),t._v(" "),a("p",[t._v("设置文档类型为 XML")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/1520892036.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"根据-id-删除"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#根据-id-删除"}},[t._v("#")]),t._v(" 根据 ID 删除")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("    <delete>\n        <id>536563</id>\n    </delete>\n    <commit />\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h3",{attrs:{id:"根据查询删除"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#根据查询删除"}},[t._v("#")]),t._v(" 根据查询删除")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("    <delete>\n        <query>*:*</query>\n    </delete>\n    <commit/>\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h2",{attrs:{id:"查询功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查询功能"}},[t._v("#")]),t._v(" 查询功能")]),t._v(" "),a("h3",{attrs:{id:"查询条件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查询条件"}},[t._v("#")]),t._v(" 查询条件")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/1520892126.png",alt:""}})]),t._v(" "),a("p",[t._v("说明：")]),t._v(" "),a("ul",[a("li",[t._v("q：查询条件，"),a("em",[t._v(":")]),t._v(" 为查询所有域，单独查询某个域如："),a("code",[t._v("tb_item_title:手机")])]),t._v(" "),a("li",[t._v("fq: 过滤条件")]),t._v(" "),a("li",[t._v("sort：排序条件")]),t._v(" "),a("li",[t._v("start,rows：分页条件")]),t._v(" "),a("li",[t._v("fl：字段列表返回域，如只希望返回 "),a("code",[t._v("id")])]),t._v(" "),a("li",[t._v("df：默认搜索域，如之前配置的复制域 "),a("code",[t._v("tb_item_keywords")])])]),t._v(" "),a("h3",{attrs:{id:"高亮显示"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#高亮显示"}},[t._v("#")]),t._v(" 高亮显示")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/20181107022036.png",alt:""}})]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/20181107022156.png",alt:""}})]),t._v(" "),a("p",[t._v("说明：上图意为在默认搜索域 "),a("code",[t._v("tb_item_keywords")]),t._v(" 中搜索关键字 "),a("code",[t._v("手机")]),t._v(" 并指定需要高亮显示的结果域 "),a("code",[t._v("tb_item_title")]),t._v(" 以 "),a("code",[t._v("红色")]),t._v(" 显示")])])}),[],!1,null,null,null);s.default=r.exports}}]);