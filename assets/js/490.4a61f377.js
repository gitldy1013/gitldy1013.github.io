(window.webpackJsonp=window.webpackJsonp||[]).push([[490],{1186:function(e,s,a){"use strict";a.r(s);var t=a(5),n=Object(t.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"docker-容器互联"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-容器互联"}},[e._v("#")]),e._v(" Docker 容器互联")]),e._v(" "),a("p",[e._v("如果你之前有 "),a("code",[e._v("Docker")]),e._v(" 使用经验，你可能已经习惯了使用 "),a("code",[e._v("--link")]),e._v(" 参数来使容器互联。")]),e._v(" "),a("p",[e._v("随着 Docker 网络的完善，强烈建议大家将容器加入自定义的 Docker 网络来连接多个容器，而不是使用 "),a("code",[e._v("--link")]),e._v(" 参数。")]),e._v(" "),a("h2",{attrs:{id:"新建网络"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新建网络"}},[e._v("#")]),e._v(" 新建网络")]),e._v(" "),a("p",[e._v("下面先创建一个新的 Docker 网络。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("    $ docker network create -d bridge my-net\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[a("code",[e._v("-d")]),e._v(" 参数指定 Docker 网络类型，有 "),a("code",[e._v("bridge")]),e._v(" "),a("code",[e._v("overlay")]),e._v("。其中 "),a("code",[e._v("overlay")]),e._v(" 网络类型用于 "),a("code",[e._v("Swarm mode")]),e._v("，在本小节中你可以忽略它。")]),e._v(" "),a("h2",{attrs:{id:"连接容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#连接容器"}},[e._v("#")]),e._v(" 连接容器")]),e._v(" "),a("p",[e._v("运行一个容器并连接到新建的 "),a("code",[e._v("my-net")]),e._v(" 网络")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("    $ docker run -it --rm --name busybox1 --network my-net busybox sh\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("打开新的终端，再运行一个容器并加入到 "),a("code",[e._v("my-net")]),e._v(" 网络")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("    $ docker run -it --rm --name busybox2 --network my-net busybox sh\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("再打开一个新的终端查看容器信息")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('    $ docker container ls\n    \n    CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n    b47060aca56b        busybox             "sh"                11 minutes ago      Up 11 minutes                           busybox2\n    8720575823ec        busybox             "sh"                16 minutes ago      Up 16 minutes                           busybox1\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("下面通过 "),a("code",[e._v("ping")]),e._v(" 来证明 "),a("code",[e._v("busybox1")]),e._v(" 容器和 "),a("code",[e._v("busybox2")]),e._v(" 容器建立了互联关系。")]),e._v(" "),a("p",[e._v("在 "),a("code",[e._v("busybox1")]),e._v(" 容器输入以下命令")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("    / # ping busybox2\n    PING busybox2 (172.19.0.3): 56 data bytes\n    64 bytes from 172.19.0.3: seq=0 ttl=64 time=0.072 ms\n    64 bytes from 172.19.0.3: seq=1 ttl=64 time=0.118 ms\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("用 ping 来测试连接 "),a("code",[e._v("busybox2")]),e._v(" 容器，它会解析成 "),a("code",[e._v("172.19.0.3")]),e._v("。")]),e._v(" "),a("p",[e._v("同理在 "),a("code",[e._v("busybox2")]),e._v(" 容器执行 "),a("code",[e._v("ping busybox1")]),e._v("，也会成功连接到。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("    / # ping busybox1\n    PING busybox1 (172.19.0.2): 56 data bytes\n    64 bytes from 172.19.0.2: seq=0 ttl=64 time=0.064 ms\n    64 bytes from 172.19.0.2: seq=1 ttl=64 time=0.143 ms\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("这样，"),a("code",[e._v("busybox1")]),e._v(" 容器和 "),a("code",[e._v("busybox2")]),e._v(" 容器建立了互联关系。")]),e._v(" "),a("h2",{attrs:{id:"docker-compose"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose"}},[e._v("#")]),e._v(" Docker Compose")]),e._v(" "),a("p",[e._v("如果你有多个容器之间需要互相连接，推荐使用 "),a("code",[e._v("Docker Compose")]),e._v("。")])])}),[],!1,null,null,null);s.default=n.exports}}]);