(window.webpackJsonp=window.webpackJsonp||[]).push([[108],{804:function(s,n,a){"use strict";a.r(n);var e=a(5),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"java使用ip2region替代淘宝ip接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#java使用ip2region替代淘宝ip接口"}},[s._v("#")]),s._v(" Java使用Ip2region替代淘宝IP接口")]),s._v(" "),a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("p",[s._v("前段时间淘宝的IP接口宕机，导致无法直接获取到IP信息，同时调用淘宝的ip也返回缓慢，直接拖慢了系统的运行效率，导致我只能注释掉原来通过淘宝获取ip的接口。")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/image-20200531084039501.png",alt:"image-20200531084039501"}})]),s._v(" "),a("p",[s._v("这段时间貌似淘宝的IP接口又悄悄的上线了")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/image-20200531084132125.png",alt:"image-20200531084132125"}})]),s._v(" "),a("p",[s._v("但是通过观察我发现，貌似需要通过accessKey才能够继续访问了，然后我找了一段时间，也没有看到哪里能够申请访问的密钥，故此打算放弃淘宝IP接口了。")]),s._v(" "),a("p",[s._v("后面通过Github发现一款非常不错的IP转换工具："),a("a",{attrs:{href:"https://github.com/lionsoul2014/ip2region",target:"_blank",rel:"noopener noreferrer"}},[s._v("Ip2region"),a("OutboundLink")],1),s._v("，它能够让原来IP转换成城市信息直接离线计算，而不需要通过网络请求的方式，这样大大降低了我们的网络开销。")]),s._v(" "),a("h2",{attrs:{id:"介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[s._v("#")]),s._v(" 介绍")]),s._v(" "),a("p",[s._v("ip2region - 准确率99.9%的离线IP地址定位库，0.0x毫秒级查询，ip2region.db数据库只有数MB。")]),s._v(" "),a("p",[s._v("全部的查询客户端单次查询都在0.x毫秒级别，内置了三种查询算法")]),s._v(" "),a("ul",[a("li",[s._v("memory算法：整个数据库全部载入内存，单次查询都在0.1x毫秒内，C语言的客户端单次查询在0.00x毫秒级别。")]),s._v(" "),a("li",[s._v("binary算法：基于二分查找，基于ip2region.db文件，不需要载入内存，单次查询在0.x毫秒级别。")]),s._v(" "),a("li",[s._v("b-tree算法：基于btree算法，基于ip2region.db文件，不需要载入内存，单词查询在0.x毫秒级别，比binary算法更快。")])]),s._v(" "),a("h2",{attrs:{id:"引入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#引入"}},[s._v("#")]),s._v(" 引入")]),s._v(" "),a("p",[s._v("首先我们需要引入对应的Maven依赖")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("<dependency>\n    <groupId>org.lionsoul</groupId>\n    <artifactId>ip2region</artifactId>\n    <version>1.7.2</version>\n</dependency>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("然后我们再去"),a("a",{attrs:{href:"https://github.com/lionsoul2014/ip2region/tree/master/data",target:"_blank",rel:"noopener noreferrer"}},[s._v("ip2region的官网"),a("OutboundLink")],1),s._v("下载到ip数据库，也就是这个文件")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/image-20200531084709141.png",alt:"image-20200531084709141"}})]),s._v(" "),a("p",[s._v("然后我们放在我们工具类的resource目录下，创建一个city文件夹存放")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/image-20200531084752121.png",alt:"image-20200531084752121"}})]),s._v(" "),a("p",[s._v("然后在原来的IP工具类中，添加下面方法")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('    public static String getCityInfo(String ip) {\n\n        //db\n        String dbPath = IpUtils.class.getResource("/city/ip2region.db").getPath();\n\n        File file = new File(dbPath);\n        if (file.exists() == false) {\n            System.out.println("Error: Invalid ip2region.db file");\n        }\n\n        //查询算法\n        //B-tree, B树搜索（更快）\n        int algorithm = DbSearcher.BTREE_ALGORITHM;\n\n        //Binary,使用二分搜索\n        //DbSearcher.BINARY_ALGORITHM\n\n        //Memory,加载内存（最快）\n        //DbSearcher.MEMORY_ALGORITYM\n        try {\n            DbConfig config = new DbConfig();\n            DbSearcher searcher = new DbSearcher(config, dbPath);\n\n            //define the method\n            Method method = null;\n            switch (algorithm) {\n                case DbSearcher.BTREE_ALGORITHM:\n                    method = searcher.getClass().getMethod("btreeSearch", String.class);\n                    break;\n                case DbSearcher.BINARY_ALGORITHM:\n                    method = searcher.getClass().getMethod("binarySearch", String.class);\n                    break;\n                case DbSearcher.MEMORY_ALGORITYM:\n                    method = searcher.getClass().getMethod("memorySearch", String.class);\n                    break;\n            }\n\n            DataBlock dataBlock = null;\n            if (Util.isIpAddress(ip) == false) {\n                System.out.println("Error: Invalid ip address");\n            }\n\n            dataBlock = (DataBlock) method.invoke(searcher, ip);\n            String ipInfo = dataBlock.getRegion();\n            if (!StringUtils.isEmpty(ipInfo)) {\n                ipInfo = ipInfo.replace("|0", "");\n            }\n            return ipInfo;\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n        return null;\n    }\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br")])]),a("p",[s._v("最后通过main方法进行测试")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('    public static void main(String args[]) {\n        String ip="220.248.12.158";\n        String cityIpString = getCityInfo(ip);\n        System.out.println(cityIpString);\n    }\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("运行结果")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/image-20200531084854577.png",alt:"image-20200531084854577"}})]),s._v(" "),a("p",[s._v("在上述方法中，还提供了三种查询的策略，具体介绍在上文已经说过")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("//查询算法\n//B-tree, B树搜索（更快）\nint algorithm = DbSearcher.BTREE_ALGORITHM;\n\n//Binary,使用二分搜索\n//DbSearcher.BINARY_ALGORITHM\n\n//Memory,加载内存（最快）\n//DbSearcher.MEMORY_ALGORITYM\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("我目前采用的是B树进行查找，然后将查询出来的IP存储在redis中，同时设置过期时间为1天，这样能够降低我们的内存消耗，虽然可能就是第一次查询的时候稍微慢一些。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("        //从Redis中获取IP来源\n        String jsonResult = redisUtil.get(SysConf.IP_SOURCE + BaseSysConf.REDIS_SEGMENTATION + ip);\n        if (StringUtils.isEmpty(jsonResult)) {\n            String addresses = IpUtils.getAddresses(SysConf.IP + SysConf.EQUAL_TO + ip, SysConf.UTF_8);\n            if (StringUtils.isNotEmpty(addresses)) {\n                exception.setIpSource(addresses);\n                redisUtil.setEx(SysConf.IP_SOURCE + BaseSysConf.REDIS_SEGMENTATION + ip, addresses, 24, TimeUnit.HOURS);\n            }\n        } else {\n            exception.setIpSource(jsonResult);\n        }\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h2",{attrs:{id:"遇到的坑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#遇到的坑"}},[s._v("#")]),s._v(" 遇到的坑")]),s._v(" "),a("p",[s._v("上面的操作在IDEA中运行是没有问题的，但是如果你打包成jar包，部署到服务器中！！！就会出错")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/image-20200531092458482.png",alt:"image-20200531092458482"}})]),s._v(" "),a("p",[s._v("也就是打包后的jar包，无法获取到我们的 "),a("code",[s._v("ip2region.db")]),s._v(" 文件，那么我们需要做的就是把文件内容重新创建一个目录，然后通过IO流进行读取，下次读取的时候，会判断文件是否存在，如果存在的话，那么就直接返回该路径")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('    /**\n     * 创建ip2region文件\n     * @return\n     */\n    public static String createFtlFileByFtlArray() {\n        String ftlPath = "city/";\n        return createFtlFile(ftlPath, "ip2region.db");\n    }\n\n    /**\n     * 创建文件\n     * @param ftlPath\n     * @param ftlName\n     * @return\n     */\n    private static String createFtlFile(String ftlPath, String ftlName) {\n        InputStream certStream = null;\n        try {\n            //获取当前项目所在的绝对路径\n            String proFilePath = System.getProperty("user.dir");\n\n            //获取模板下的路径，然后存放在temp目录下　\n            String newFilePath = proFilePath + File.separator + "temp" + File.separator + ftlPath;\n            newFilePath = newFilePath.replace("/", File.separator);\n            //检查项目运行时的src下的对应路径\n            File newFile = new File(newFilePath + ftlName);\n            if (newFile.isFile() && newFile.exists()) {\n                return newFilePath;\n            }\n            //当项目打成jar包会运行下面的代码，并且复制一份到src路径下（具体结构看下面图片）\n            certStream = Thread.currentThread().getContextClassLoader().getResourceAsStream(ftlPath + ftlName);\n            byte[] certData = org.apache.commons.io.IOUtils.toByteArray(certStream);\n            org.apache.commons.io.FileUtils.writeByteArrayToFile(newFile, certData);\n            return newFilePath;\n        } catch (Exception e) {\n            log.error(e.getMessage());\n        } finally {\n            try {\n                certStream.close();\n            } catch (Exception e) {\n                log.error(e.getMessage());\n            }\n        }\n        return null;\n    }\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br")])]),a("p",[s._v("然后是修改原来的getCityInfo接口")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('    public static String getCityInfo(String ip) {\n\n        String dbPath = createFtlFileByFtlArray() + "ip2region.db";\n        File file = new File(dbPath);\n        if (file.exists() == false) {\n            System.out.println("Error: Invalid ip2region.db file");\n        }\n\n        //查询算法\n        //B-tree, B树搜索（更快）\n        int algorithm = DbSearcher.BTREE_ALGORITHM;\n\n        //Binary,使用二分搜索\n        //DbSearcher.BINARY_ALGORITHM\n\n        //Memory,加载内存（最快）\n        //DbSearcher.MEMORY_ALGORITYM\n        try {\n            DbConfig config = new DbConfig();\n            DbSearcher searcher = new DbSearcher(config, dbPath);\n\n            //define the method\n            Method method = null;\n            switch (algorithm) {\n                case DbSearcher.BTREE_ALGORITHM:\n                    method = searcher.getClass().getMethod("btreeSearch", String.class);\n                    break;\n                case DbSearcher.BINARY_ALGORITHM:\n                    method = searcher.getClass().getMethod("binarySearch", String.class);\n                    break;\n                case DbSearcher.MEMORY_ALGORITYM:\n                    method = searcher.getClass().getMethod("memorySearch", String.class);\n                    break;\n            }\n\n            DataBlock dataBlock = null;\n            if (Util.isIpAddress(ip) == false) {\n                System.out.println("Error: Invalid ip address");\n            }\n\n            dataBlock = (DataBlock) method.invoke(searcher, ip);\n            String ipInfo = dataBlock.getRegion();\n            if (!StringUtils.isEmpty(ipInfo)) {\n                ipInfo = ipInfo.replace("|0", "");\n                ipInfo = ipInfo.replace("0|", "");\n            }\n            return ipInfo;\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n        return null;\n    }\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br")])]),a("p",[s._v("最后运行后，会发现在项目的根目录下，会创建一个temp目录，用于存放我们的"),a("code",[s._v(".db")]),s._v("文件")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/image-20200531095340010.png",alt:"image-20200531095340010"}})]),s._v(" "),a("p",[s._v("我们再次打包部署服务器后，发现能够成功获取到IP城市信息了~")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/image-20200531100104493.png",alt:"image-20200531100104493"}})])])}),[],!1,null,null,null);n.default=t.exports}}]);