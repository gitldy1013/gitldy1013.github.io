(window.webpackJsonp=window.webpackJsonp||[]).push([[1094],{1790:function(s,n,a){"use strict";a.r(n);var t=a(5),e=Object(t.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"使用-axios-实现异步通信"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-axios-实现异步通信"}},[s._v("#")]),s._v(" 使用 Axios 实现异步通信")]),s._v(" "),a("h2",{attrs:{id:"什么是-axios"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是-axios"}},[s._v("#")]),s._v(" 什么是 Axios")]),s._v(" "),a("p",[s._v("Axios 是一个开源的可以用在浏览器端和 NodeJS 的异步通信框架，她的主要作用就是实现 AJAX 异步通信，其功能特点如下：")]),s._v(" "),a("ul",[a("li",[s._v("从浏览器中创建 "),a("code",[s._v("XMLHttpRequests")])]),s._v(" "),a("li",[s._v("从 "),a("code",[s._v("node.js")]),s._v(" 创建 "),a("code",[s._v("http")]),s._v(" 请求")]),s._v(" "),a("li",[s._v("支持 "),a("code",[s._v("Promise API")])]),s._v(" "),a("li",[s._v("拦截请求和响应")]),s._v(" "),a("li",[s._v("转换请求数据和响应数据")]),s._v(" "),a("li",[s._v("取消请求")]),s._v(" "),a("li",[s._v("自动转换 "),a("code",[s._v("JSON")]),s._v(" 数据")]),s._v(" "),a("li",[s._v("客户端支持防御 "),a("code",[s._v("XSRF")]),s._v("（跨站请求伪造）")])]),s._v(" "),a("p",[s._v("GitHub：https://github.com/axios/axios")]),s._v(" "),a("h2",{attrs:{id:"为什么要使用-axios"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么要使用-axios"}},[s._v("#")]),s._v(" 为什么要使用 Axios")]),s._v(" "),a("p",[s._v("由于 Vue.js 是一个 "),a("strong",[s._v("视图层框架")]),s._v(" 并且作者（尤雨溪）严格准守 "),a("code",[s._v("SoC")]),s._v(" （关注度分离原则），所以 Vue.js 并不包含 AJAX 的通信功能，为了解决通信问题，作者单独开发了一个名为 "),a("code",[s._v("vue-resource")]),s._v(" 的插件，不过在进入 2.0 版本以后停止了对该插件的维护并推荐了 Axios 框架")]),s._v(" "),a("h2",{attrs:{id:"第一个-axios-应用程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第一个-axios-应用程序"}},[s._v("#")]),s._v(" 第一个 Axios 应用程序")]),s._v(" "),a("p",[s._v("咱们开发的接口大部分都是采用 JSON 格式，可以先在项目里模拟一段 JSON 数据，数据内容如下：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('    {\n      "name": "中国移动",\n      "url": "http://www.cmcc.com",\n      "page": 88,\n      "isNonProfit": true,\n      "address": {\n        "street": "安定门",\n        "city": "北京",\n        "country": "中国"\n      },\n      "links": [\n        {\n          "name": "Google",\n          "url": "http://www.google.com"\n        },\n        {\n          "name": "Baidu",\n          "url": "http://www.baidu.com"\n        },\n        {\n          "name": "SoSo",\n          "url": "http://www.SoSo.com"\n        }\n      ]\n    }\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br")])]),a("p",[s._v("创建一个名为 "),a("code",[s._v("data.json")]),s._v(" 的文件并填入上面的内容，放在项目的根目录下，如图所示：")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/20181219031007.png",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"创建-html"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建-html"}},[s._v("#")]),s._v(" 创建 HTML")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('    <div id="vue">\n        <div>名称：{{info.name}}</div>\n        <div>地址：{{info.address.country}}-{{info.address.city}}-{{info.address.street}}</div>\n        <div>链接：<a v-bind:href="info.url" target="_blank">{{info.url}}</a> </div>\n    </div>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("注：在这里使用了 "),a("code",[s._v("v-bind")]),s._v(" 将 "),a("code",[s._v("a:href")]),s._v(" 的属性值与 Vue 实例中的数据进行绑定")]),s._v(" "),a("h3",{attrs:{id:"引入-js-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#引入-js-文件"}},[s._v("#")]),s._v(" 引入 JS 文件")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.21/dist/vue.js"><\/script>\n    <script src="https://unpkg.com/axios/dist/axios.min.js"><\/script>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"javascript"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#javascript"}},[s._v("#")]),s._v(" JavaScript")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    <script type=\"text/javascript\">\n        var vm = new Vue({\n            el: '#vue',\n            data() {\n                return {\n                    info: {\n                        name: null,\n                        address: {\n                            country: null,\n                            city: null,\n                            street: null\n                        },\n                        url: null\n                    }\n                }\n            },\n            mounted() {\n                axios\n                    .get('data.json')\n                    .then(response => (this.info = response.data));\n            }\n        });\n    <\/script>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br")])]),a("p",[s._v("使用 "),a("code",[s._v("axios")]),s._v(" 框架的 "),a("code",[s._v("get")]),s._v(" 方法请求 AJAX 并自动将数据封装进了 Vue 实例的数据对象中")]),s._v(" "),a("h4",{attrs:{id:"数据对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据对象"}},[s._v("#")]),s._v(" 数据对象")]),s._v(" "),a("p",[s._v("这里的数据结构与 JSON 数据结构是匹配的")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    info: {\n        name: null,\n        address: {\n            country: null,\n            city: null,\n            street: null\n        },\n        url: null\n    }\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h4",{attrs:{id:"调用-get-请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#调用-get-请求"}},[s._v("#")]),s._v(" 调用 "),a("code",[s._v("get")]),s._v(" 请求")]),s._v(" "),a("p",[s._v("调用 "),a("code",[s._v("axios")]),s._v(" 的 "),a("code",[s._v("get")]),s._v(" 请求并自动装箱数据")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    axios\n        .get('data.json')\n        .then(response => (this.info = response.data));\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"测试效果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试效果"}},[s._v("#")]),s._v(" 测试效果")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/20181219035421.png",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"完整的-html"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#完整的-html"}},[s._v("#")]),s._v(" 完整的 HTML")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('    <!DOCTYPE html>\n    <html>\n    <head>\n        <meta charset="UTF-8">\n        <title>网络篇 Axios</title>\n        <script src="https://cdn.jsdelivr.net/npm/vue@2.5.21/dist/vue.js"><\/script>\n        <script src="https://unpkg.com/axios/dist/axios.min.js"><\/script>\n    </head>\n    <body>\n    \n    <div id="vue">\n        <div>名称：{{info.name}}</div>\n        <div>地址：{{info.address.country}}-{{info.address.city}}-{{info.address.street}}</div>\n        <div>链接：<a v-bind:href="info.url" target="_blank">{{info.url}}</a> </div>\n    </div>\n    \n    <script type="text/javascript">\n        var vm = new Vue({\n            el: \'#vue\',\n            data() {\n                return {\n                    info: {\n                        name: null,\n                        address: {\n                            country: null,\n                            city: null,\n                            street: null\n                        },\n                        url: null\n                    }\n                }\n            },\n            mounted() {\n                axios\n                    .get(\'data.json\')\n                    .then(response => (this.info = response.data));\n            }\n        });\n    <\/script>\n    </body>\n    </html>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br")])])])}),[],!1,null,null,null);n.default=e.exports}}]);