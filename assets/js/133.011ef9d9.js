(window.webpackJsonp=window.webpackJsonp||[]).push([[133],{831:function(t,n,s){"use strict";s.r(n);var a=s(5),e=Object(a.a)({},(function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"kubernetes中的cri"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#kubernetes中的cri"}},[t._v("#")]),t._v(" Kubernetes中的CRI")]),t._v(" "),s("h2",{attrs:{id:"前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),s("p",[s("strong",[t._v("Kubernetes")]),t._v(" 节点的底层由一个叫做"),s("strong",[t._v("容器运行时")]),t._v("的软件进行支撑，它主要负责启停容器。")]),t._v(" "),s("p",[s("strong",[t._v("Docker")]),t._v(" 是目前最广为人知的容器运行时软件，但是它并非唯一。在这几年中，容器运行时这个领域发展的迅速。为了使得 "),s("strong",[t._v("Kubernetes")]),t._v(" 的扩展变得更加容易，一直在打磨支持容器运行时的 "),s("strong",[t._v("K8S")]),t._v("插件 "),s("strong",[t._v("API")]),t._v("，也就是 容器运行时接口 ( Container Runtime Interface, CRI) 。")]),t._v(" "),s("h2",{attrs:{id:"k8s架构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#k8s架构"}},[t._v("#")]),t._v(" k8s架构")]),t._v(" "),s("p",[t._v("这里通过分析 "),s("strong",[t._v("k8s")]),t._v(" 目前默认的一种容器运行时架构，来帮助我们更好的理解 "),s("strong",[t._v("k8s")]),t._v(" 运行时的背后逻辑，同时引出 "),s("strong",[t._v("CRI")]),t._v(" 和 "),s("strong",[t._v("OCI")]),t._v(" 提出的背景。")]),t._v(" "),s("p",[t._v("我们在创建 "),s("strong",[t._v("k8s")]),t._v(" 集群的时候，首先需要搭建 "),s("strong",[t._v("master")]),t._v(" 节点，其次需要创建 "),s("strong",[t._v("node")]),t._v(" 节点，并将 "),s("strong",[t._v("node")]),t._v(" 节点加入到 "),s("strong",[t._v("k8s")]),t._v(" 集群中。当我们构建好 "),s("strong",[t._v("k8s")]),t._v(" 集群后，可以通过 下面命令来创建应用对应的pod")]),t._v(" "),s("div",{staticClass:"language-shell script line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("kubectl create -f nginx.yml\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("执行完成后，该命令首先会提交给 "),s("strong",[t._v("API Server")]),t._v(" ，然后解析 "),s("strong",[t._v("yml")]),t._v(" 文件，并对其以 "),s("strong",[t._v("API")]),t._v(" 对象的形式存到 "),s("strong",[t._v("etcd")]),t._v(" 里。")]),t._v(" "),s("p",[t._v("这时候，"),s("strong",[t._v("master")]),t._v(" 组件中的 "),s("strong",[t._v("Controller Manager")]),t._v(" 会通过控制循环的方式来做编排工作，创建应用所需的Pod。同时 "),s("strong",[t._v("Scheduler")]),t._v(" 会 "),s("strong",[t._v("watch etcd")]),t._v(" 中新 "),s("strong",[t._v("pod")]),t._v(" 的变化，如果他发现有一个新的 "),s("strong",[t._v("pod")]),t._v(" 的变化。")]),t._v(" "),s("p",[t._v("如果 "),s("strong",[t._v("Scheduler")]),t._v(" 发现有一个新的 "),s("strong",[t._v("pod")]),t._v(" 出现，它会运行调度算法，然后选择出最佳的 "),s("strong",[t._v("Node")]),t._v(" 节点，并将这个节点的名字写到 "),s("strong",[t._v("pod")]),t._v(" 对象的 "),s("strong",[t._v("NodeName")]),t._v(" 字段上，这一步就是所谓的 "),s("strong",[t._v("Bind Pod to Node")]),t._v("，然后把 "),s("strong",[t._v("bind")]),t._v(" 的结果写到 "),s("strong",[t._v("etcd")]),t._v("。")]),t._v(" "),s("p",[t._v("其次，当我们在构建 "),s("strong",[t._v("k8s")]),t._v(" 集群的时候，默认每个节点都会初始化创建一个 "),s("strong",[t._v("kubectl")]),t._v(" 进程，"),s("strong",[t._v("kubectl")]),t._v(" 进程会  "),s("strong",[t._v("watch etcd")]),t._v(" 中 "),s("strong",[t._v("pod")]),t._v(" 的变化，当 "),s("strong",[t._v("kubectl")]),t._v(" 进程监听到 "),s("strong",[t._v("pod")]),t._v(" 的 "),s("strong",[t._v("bind")]),t._v(" 的更新操作，并且 "),s("strong",[t._v("bind")]),t._v(" 的节点是本节点时，它会接管接下来的所有事情，如镜像下载，创建容器等。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/595328-20190924154453278-2062939099.jpg",alt:"img"}})]),t._v(" "),s("h2",{attrs:{id:"k8s默认容器运行时架构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#k8s默认容器运行时架构"}},[t._v("#")]),t._v(" k8s默认容器运行时架构")]),t._v(" "),s("p",[t._v("接下来将通过 "),s("strong",[t._v("k8s")]),t._v(" 默认集成的容器运行时架构，来看 "),s("strong",[t._v("kubernetes")]),t._v(" 如何创建一个容器 （如下图）")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("kubernetes")]),t._v(" 通过 "),s("strong",[t._v("CRI")]),t._v(" (Container Runtime Interface) 接口调用 "),s("strong",[t._v("dockershim")]),t._v("，请求创建一个容器。这一步中，"),s("strong",[t._v("Kubectl")]),t._v(" 可以视作一个简单的 "),s("strong",[t._v("CRI Client")]),t._v("，而 "),s("strong",[t._v("dockershim")]),t._v(" 就是接收的 "),s("strong",[t._v("Server")]),t._v("。")]),t._v(" "),s("li",[s("strong",[t._v("dockershim")]),t._v(" 收到请求后，通过适配的方式，适配成 "),s("strong",[t._v("Docker Daemon")]),t._v(" 的请求格式，发到 "),s("strong",[t._v("Docker Daemon")]),t._v(" 上请求创建一个容器。在 docker 1.12 后的版本，docker daemon 被拆分成了 "),s("strong",[t._v("dockerd")]),t._v(" 和 "),s("strong",[t._v("containerd")]),t._v("，其中，"),s("strong",[t._v("containerd")]),t._v(" 负责操作容器。")]),t._v(" "),s("li",[s("strong",[t._v("dockerd")]),t._v(" 收到请求后，会调用 "),s("strong",[t._v("containerd")]),t._v(" 进程去创建一个容器")]),t._v(" "),s("li",[s("strong",[t._v("containerd")]),t._v(" 收到请求后，并不会自己直接去操作容器，而是创建一个叫做 "),s("strong",[t._v("containerd-shim")]),t._v(" 的进程，让 "),s("strong",[t._v("containerd-shim")]),t._v(" 去操作容器，创建 "),s("strong",[t._v("containerd-shim")]),t._v(" 的目的主要有以下几个\n"),s("ul",[s("li",[t._v("让 "),s("strong",[t._v("containerd-shim")]),t._v(" 做诸如收集状态，维持 stdin 等 fd 打开等工作。")]),t._v(" "),s("li",[t._v("允许容器运行时( "),s("strong",[t._v("runC")]),t._v(" ) 启动容器后退出，不必为每个容器一直运行一个容器运行时的 "),s("strong",[t._v("runC")])]),t._v(" "),s("li",[t._v("即使在 "),s("strong",[t._v("containerd")]),t._v(" 和 "),s("strong",[t._v("dockerd")]),t._v(" 都挂掉的情况下，容器的标准 IO 和其它的文件描述符也是可以用的")]),t._v(" "),s("li",[t._v("向 "),s("strong",[t._v("containerd")]),t._v(" 报告容器的退出状态")]),t._v(" "),s("li",[t._v("在不中断容器运行时的情况下，升级或重启 "),s("strong",[t._v("dockerd")])])])]),t._v(" "),s("li",[t._v("而 "),s("strong",[t._v("containerd-shim")]),t._v(" 在这一步需要调用 "),s("strong",[t._v("runC")]),t._v(" 这个命令行工具，来启动容器，"),s("strong",[t._v("runC")]),t._v(" 是 "),s("strong",[t._v("OCI")]),t._v(" (Open Container Initiative， 开放标准协议) 的一个参考实现。主要用来设置 "),s("strong",[t._v("namespaces")]),t._v(" 和 "),s("strong",[t._v("cgroups")]),t._v("，挂载 root filesystem等操作。")]),t._v(" "),s("li",[s("strong",[t._v("runC")]),t._v(" 启动完容器后，本身会直接退出。"),s("strong",[t._v("containerd-shim")]),t._v(" 则会成为容器进程的父进程，负责收集容器进程的状态，上报给 "),s("strong",[t._v("containerd")]),t._v("，并在容器中的 "),s("strong",[t._v("pid")]),t._v(" 为 "),s("strong",[t._v("1")]),t._v(" 的进程退出后接管容器中的子进程进行清理，确保不会出现僵尸进程 (关闭进程描述符)。")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/595328-20190924162334102-1814702716.png",alt:"img"}})]),t._v(" "),s("h2",{attrs:{id:"容器与容器编排背景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器与容器编排背景"}},[t._v("#")]),t._v(" 容器与容器编排背景")]),t._v(" "),s("p",[t._v("从 "),s("strong",[t._v("k8s")]),t._v(" 的容器运行时可以看出，"),s("strong",[t._v("kubectl")]),t._v(" 启动容器的过程经过了很长的一段调用链路。这个是由于在容器及编排领域各大厂商与 "),s("strong",[t._v("docker")]),t._v(" 之间的竞争以及 "),s("strong",[t._v("docker")]),t._v(" 公司为了抢占 "),s("strong",[t._v("Pass")]),t._v(" ( Platform-as-a-service，平台服务)  领域市场，对架构做出的一系列调整。")]),t._v(" "),s("p",[t._v("其实 "),s("strong",[t._v("k8s")]),t._v(" 最开始的运行时架构链路调用没有这么复杂：kubelet想要创建容器直接通过 "),s("strong",[t._v("docker api")]),t._v(" 调用 "),s("strong",[t._v("Docker Daemon")]),t._v(" ， 然后Docker Daemon 调用 libcontainer 这个库来启动容器。")]),t._v(" "),s("p",[t._v("后面为了防止 "),s("strong",[t._v("docker")]),t._v(" 垄断以及受控 docker 运行时，各大厂商于是就联合起来，制订出 开放容器标准"),s("strong",[t._v("OCI")]),t._v(" ( Open Containers Initiative ) 。大家可以基于这个标准开发自己的容器运行时。Docker公司则把 "),s("strong",[t._v("libcontainer")]),t._v(" 做了一层封装，变成 "),s("strong",[t._v("runC")]),t._v(" 捐献给 "),s("strong",[t._v("CNCF")]),t._v(" 作为 "),s("strong",[t._v("OCI")]),t._v(" 的参考实现。")]),t._v(" "),s("p",[t._v("接下来就是 "),s("strong",[t._v("Docker")]),t._v(" 要搞 "),s("strong",[t._v("Swarm")]),t._v(" 进军 "),s("strong",[t._v("PaaS")]),t._v(" 市场，于是做了个架构切分，把容器操作都移动到一个单独的 "),s("strong",[t._v("Daemon")]),t._v(" 进程的 "),s("strong",[t._v("containerd")]),t._v(" 中去，让 Docker Daemon专门负责上层封装编排，但是最终 "),s("strong",[t._v("Swarm")]),t._v(" 败给了 "),s("strong",[t._v("K8S")]),t._v(" ，于是Docker公司就把 "),s("strong",[t._v("Containerd")]),t._v(" 捐给了 CNCF，专注于搞 "),s("strong",[t._v("Docker")]),t._v(" 企业版了。")]),t._v(" "),s("p",[t._v("与此同时，容器领域 "),s("strong",[t._v("core os")]),t._v(" 公司推出了 "),s("strong",[t._v("rkt")]),t._v(" 容器运行时，希望 "),s("strong",[t._v("k8s")]),t._v(" 原生支持 "),s("strong",[t._v("rkt")]),t._v(" 作为运行时，由于 "),s("strong",[t._v("core os")]),t._v(" 与 "),s("strong",[t._v("Google")]),t._v(" 的关系，最终 "),s("strong",[t._v("rkt")]),t._v(" 运行时的支持在 "),s("strong",[t._v("2016")]),t._v(" 年也被合并进 "),s("strong",[t._v("kubelet")]),t._v(" 主干代码里，这样做反而给 "),s("strong",[t._v("k8s")]),t._v(" 中负责维护 "),s("strong",[t._v("kubelet")]),t._v(" 的小组 "),s("strong",[t._v("SIG-Node")]),t._v(" 带来了更大的负担，每一次 "),s("strong",[t._v("kubectl")]),t._v(" 的更新都要维护 "),s("strong",[t._v("docker")]),t._v(" 和 "),s("strong",[t._v("rkt")]),t._v(" 作为两部分代码。与此同时，随着虚拟化技术强隔离容器技术 "),s("strong",[t._v("runV")]),t._v(" (Kata Containers 前身, 后与 intel clear container 合并)的逐渐成熟。"),s("strong",[t._v("K8S")]),t._v(" 上游对虚拟化容器的支持很快被提上日程。为了从集成每一种运行时都要维护的一份代码中解救出来，"),s("strong",[t._v("K8S SIG-Node")]),t._v(" 工作组决定对容器的操作统一地抽象成一个接口，这样 "),s("strong",[t._v("kubelet")]),t._v(" 只需要跟这个接口打交道，而具体地容器运行时，他们只需要实现该接口，并对kubelet暴露 "),s("strong",[t._v("gRPC")]),t._v(" 服务即可。这个统一地抽象的接口就是 "),s("strong",[t._v("k8s")]),t._v(" 中俗称的 "),s("strong",[t._v("CRI")]),t._v("。")]),t._v(" "),s("h2",{attrs:{id:"cri接口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cri接口"}},[t._v("#")]),t._v(" CRI接口")]),t._v(" "),s("p",[s("strong",[t._v("CRI")]),t._v(" (容器运行时接口)基于 "),s("strong",[t._v("gRPC")]),t._v(" 定义了 "),s("strong",[t._v("RuntimeService")]),t._v(" 和 "),s("strong",[t._v("ImageService")]),t._v(" 等两个 "),s("strong",[t._v("gRPC")]),t._v(" 服务，分别用于容器运行时和镜像的管理。如下所示")]),t._v(" "),s("div",{staticClass:"language-go line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Runtime service defines the public APIs for remote container runtimes")]),t._v("\nservice RuntimeService "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Version returns the runtime name, runtime version, and runtime API version.")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("VersionRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("VersionResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// RunPodSandbox creates and starts a pod-level sandbox. Runtimes must ensure")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// the sandbox is in the ready state on success.")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("RunPodSandbox")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("RunPodSandboxRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("RunPodSandboxResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// StopPodSandbox stops any running process that is part of the sandbox and")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// reclaims network resources (e.g., IP addresses) allocated to the sandbox.")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// If there are any running containers in the sandbox, they must be forcibly")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// terminated.")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// This call is idempotent, and must not return an error if all relevant")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// resources have already been reclaimed. kubelet will call StopPodSandbox")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// at least once before calling RemovePodSandbox. It will also attempt to")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// reclaim resources eagerly, as soon as a sandbox is not needed. Hence,")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// multiple StopPodSandbox calls are expected.")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("StopPodSandbox")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("StopPodSandboxRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("StopPodSandboxResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// RemovePodSandbox removes the sandbox. If there are any running containers")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// in the sandbox, they must be forcibly terminated and removed.")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// This call is idempotent, and must not return an error if the sandbox has")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// already been removed.")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("RemovePodSandbox")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("RemovePodSandboxRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("RemovePodSandboxResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// PodSandboxStatus returns the status of the PodSandbox. If the PodSandbox is not")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// present, returns an error.")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("PodSandboxStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("PodSandboxStatusRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("PodSandboxStatusResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ListPodSandbox returns a list of PodSandboxes.")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ListPodSandbox")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ListPodSandboxRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ListPodSandboxResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// CreateContainer creates a new container in specified PodSandbox")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateContainer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CreateContainerRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CreateContainerResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// StartContainer starts the container.")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("StartContainer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("StartContainerRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("StartContainerResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// StopContainer stops a running container with a grace period (i.e., timeout).")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// This call is idempotent, and must not return an error if the container has")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// already been stopped.")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO: what must the runtime do after the grace period is reached?")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("StopContainer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("StopContainerRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("StopContainerResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// RemoveContainer removes the container. If the container is running, the")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// container must be forcibly removed.")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// This call is idempotent, and must not return an error if the container has")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// already been removed.")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("RemoveContainer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("RemoveContainerRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("RemoveContainerResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ListContainers lists all containers by filters.")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ListContainers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ListContainersRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ListContainersResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ContainerStatus returns status of the container. If the container is not")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// present, returns an error.")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ContainerStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ContainerStatusRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ContainerStatusResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// UpdateContainerResources updates ContainerConfig of the container.")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UpdateContainerResources")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("UpdateContainerResourcesRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("UpdateContainerResourcesResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ReopenContainerLog asks runtime to reopen the stdout/stderr log file")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// for the container. This is often called after the log file has been")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// rotated. If the container is not running, container runtime can choose")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// to either create a new log file and return nil, or return an error.")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Once it returns error, new container log file MUST NOT be created.")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ReopenContainerLog")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ReopenContainerLogRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ReopenContainerLogResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ExecSync runs a command in a container synchronously.")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ExecSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ExecSyncRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ExecSyncResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Exec prepares a streaming endpoint to execute a command in the container.")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Exec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ExecRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ExecResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Attach prepares a streaming endpoint to attach to a running container.")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Attach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AttachRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AttachResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// PortForward prepares a streaming endpoint to forward ports from a PodSandbox.")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("PortForward")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("PortForwardRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("PortForwardResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ContainerStats returns stats of the container. If the container does not")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// exist, the call returns an error.")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ContainerStats")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ContainerStatsRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ContainerStatsResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ListContainerStats returns stats of all running containers.")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ListContainerStats")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ListContainerStatsRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ListContainerStatsResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// UpdateRuntimeConfig updates the runtime configuration based on the given request.")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UpdateRuntimeConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("UpdateRuntimeConfigRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("UpdateRuntimeConfigResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Status returns the status of the runtime.")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Status")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("StatusRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("StatusResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ImageService defines the public APIs for managing images.")]),t._v("\nservice ImageService "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ListImages lists existing images.")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ListImages")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ListImagesRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ListImagesResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ImageStatus returns the status of the image. If the image is not")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// present, returns a response with ImageStatusResponse.Image set to")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// nil.")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ImageStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ImageStatusRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ImageStatusResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// PullImage pulls an image with authentication config.")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("PullImage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("PullImageRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("PullImageResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// RemoveImage removes the image.")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// This call is idempotent, and must not return an error if the image has")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// already been removed.")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("RemoveImage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("RemoveImageRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("RemoveImageResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ImageFSInfo returns information of the filesystem that is used to store images.")]),t._v("\n    rpc "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ImageFsInfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ImageFsInfoRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" returns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ImageFsInfoResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br"),s("span",{staticClass:"line-number"},[t._v("58")]),s("br"),s("span",{staticClass:"line-number"},[t._v("59")]),s("br"),s("span",{staticClass:"line-number"},[t._v("60")]),s("br"),s("span",{staticClass:"line-number"},[t._v("61")]),s("br"),s("span",{staticClass:"line-number"},[t._v("62")]),s("br"),s("span",{staticClass:"line-number"},[t._v("63")]),s("br"),s("span",{staticClass:"line-number"},[t._v("64")]),s("br"),s("span",{staticClass:"line-number"},[t._v("65")]),s("br"),s("span",{staticClass:"line-number"},[t._v("66")]),s("br"),s("span",{staticClass:"line-number"},[t._v("67")]),s("br"),s("span",{staticClass:"line-number"},[t._v("68")]),s("br"),s("span",{staticClass:"line-number"},[t._v("69")]),s("br"),s("span",{staticClass:"line-number"},[t._v("70")]),s("br"),s("span",{staticClass:"line-number"},[t._v("71")]),s("br"),s("span",{staticClass:"line-number"},[t._v("72")]),s("br"),s("span",{staticClass:"line-number"},[t._v("73")]),s("br"),s("span",{staticClass:"line-number"},[t._v("74")]),s("br"),s("span",{staticClass:"line-number"},[t._v("75")]),s("br"),s("span",{staticClass:"line-number"},[t._v("76")]),s("br"),s("span",{staticClass:"line-number"},[t._v("77")]),s("br"),s("span",{staticClass:"line-number"},[t._v("78")]),s("br"),s("span",{staticClass:"line-number"},[t._v("79")]),s("br"),s("span",{staticClass:"line-number"},[t._v("80")]),s("br"),s("span",{staticClass:"line-number"},[t._v("81")]),s("br"),s("span",{staticClass:"line-number"},[t._v("82")]),s("br"),s("span",{staticClass:"line-number"},[t._v("83")]),s("br"),s("span",{staticClass:"line-number"},[t._v("84")]),s("br"),s("span",{staticClass:"line-number"},[t._v("85")]),s("br"),s("span",{staticClass:"line-number"},[t._v("86")]),s("br"),s("span",{staticClass:"line-number"},[t._v("87")]),s("br"),s("span",{staticClass:"line-number"},[t._v("88")]),s("br"),s("span",{staticClass:"line-number"},[t._v("89")]),s("br"),s("span",{staticClass:"line-number"},[t._v("90")]),s("br"),s("span",{staticClass:"line-number"},[t._v("91")]),s("br"),s("span",{staticClass:"line-number"},[t._v("92")]),s("br"),s("span",{staticClass:"line-number"},[t._v("93")]),s("br"),s("span",{staticClass:"line-number"},[t._v("94")]),s("br"),s("span",{staticClass:"line-number"},[t._v("95")]),s("br"),s("span",{staticClass:"line-number"},[t._v("96")]),s("br")])]),s("p",[t._v("具体容器运行时则需要实现 "),s("strong",[t._v("CRI")]),t._v(" 定义的接口（即 "),s("strong",[t._v("gRPC Server")]),t._v("，通常称为 "),s("strong",[t._v("CRI shim")]),t._v("）。容器运行时在启动 "),s("strong",[t._v("gRPC server")]),t._v(" 时需要监听在本地的 "),s("strong",[t._v("Unix Socket")]),t._v(" （Windows 使用 tcp 格式）。")]),t._v(" "),s("h2",{attrs:{id:"参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),s("p",[t._v("https://www.kubernetes.org.cn/1079.html")]),t._v(" "),s("p",[t._v("https://www.cnblogs.com/justinli/p/11578951.html")])])}),[],!1,null,null,null);n.default=e.exports}}]);