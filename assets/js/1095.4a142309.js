(window.webpackJsonp=window.webpackJsonp||[]).push([[1095],{1791:function(s,t,e){"use strict";e.r(t);var n=e(5),a=Object(n.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"内容分发与自定义事件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#内容分发与自定义事件"}},[s._v("#")]),s._v(" 内容分发与自定义事件")]),s._v(" "),e("h2",{attrs:{id:"vue-中的内容分发"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue-中的内容分发"}},[s._v("#")]),s._v(" Vue 中的内容分发")]),s._v(" "),e("p",[s._v("在 Vue.js 中我们使用 "),e("code",[s._v("<slot>")]),s._v(" 元素作为承载分发内容的出口，作者称其为 "),e("code",[s._v("插槽")]),s._v("，可以应用在组合组件的场景中")]),s._v(" "),e("h3",{attrs:{id:"利用插槽功能实现一个组合组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#利用插槽功能实现一个组合组件"}},[s._v("#")]),s._v(" 利用插槽功能实现一个组合组件")]),s._v(" "),e("p",[s._v("比如准备制作一个待办事项组件（"),e("code",[s._v("todo")]),s._v("），该组件由待办标题（"),e("code",[s._v("todo-title")]),s._v("）和待办内容（"),e("code",[s._v("todo-items")]),s._v("）组成，但这三个组件又是相互独立的，该如何操作呢？")]),s._v(" "),e("h4",{attrs:{id:"定义一个名为-todo-的待办事项组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#定义一个名为-todo-的待办事项组件"}},[s._v("#")]),s._v(" 定义一个名为 "),e("code",[s._v("todo")]),s._v(" 的待办事项组件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("    Vue.component('todo', {\n        template: '<div>\\\n                        <slot name=\"todo-title\"></slot>\\\n                        <ul>\\\n                            <slot name=\"todo-items\"></slot>\\\n                        </ul>\\\n                   </div>'\n    });\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("该组件中放置了两个插槽，分别为 "),e("code",[s._v("todo-title")]),s._v(" 和 "),e("code",[s._v("todo-items")])]),s._v(" "),e("h4",{attrs:{id:"定义一个名为-todo-title-的待办标题组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#定义一个名为-todo-title-的待办标题组件"}},[s._v("#")]),s._v(" 定义一个名为 "),e("code",[s._v("todo-title")]),s._v(" 的待办标题组件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("    Vue.component('todo-title', {\n        props: ['title'],\n        template: '<div>{{title}}</div>'\n    });\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h4",{attrs:{id:"定义一个名为-todo-items-的待办内容组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#定义一个名为-todo-items-的待办内容组件"}},[s._v("#")]),s._v(" 定义一个名为 "),e("code",[s._v("todo-items")]),s._v(" 的待办内容组件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("    Vue.component('todo-items', {\n        props: ['item', 'index'],\n        template: '<li>{{index + 1}}. {{item}}</li>'\n    });\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h4",{attrs:{id:"实例化-vue-并初始化数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实例化-vue-并初始化数据"}},[s._v("#")]),s._v(" 实例化 Vue 并初始化数据")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("    var vm = new Vue({\n        el: '#vue',\n        data: {\n            todoItems: ['《刀剑神域3》', '《关于我转生成为史莱姆这件事》', '《实力至上主义教室》']\n        }\n    });\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h4",{attrs:{id:"html"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#html"}},[s._v("#")]),s._v(" HTML")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('    <div id="vue">\n        <todo>\n            <todo-title slot="todo-title" title="今日动漫推荐"></todo-title>\n            <todo-items slot="todo-items" v-for="(item, index) in todoItems" v-bind:item="item" v-bind:index="index" :key="index"></todo-items>\n        </todo>\n    </div>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("此时，我们的 "),e("code",[s._v("todo-title")]),s._v(" 和 "),e("code",[s._v("todo-items")]),s._v(" 组件分别被分发到了 "),e("code",[s._v("todo")]),s._v(" 组件的 "),e("code",[s._v("todo-title")]),s._v(" 和 "),e("code",[s._v("todo-items")]),s._v(" 插槽中")]),s._v(" "),e("h4",{attrs:{id:"测试效果"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试效果"}},[s._v("#")]),s._v(" 测试效果")]),s._v(" "),e("p",[e("img",{attrs:{src:"/img/20181223153256.png",alt:""}})]),s._v(" "),e("h2",{attrs:{id:"使用自定义事件删除待办事项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用自定义事件删除待办事项"}},[s._v("#")]),s._v(" 使用自定义事件删除待办事项")]),s._v(" "),e("p",[s._v("通过以上代码不难发现，数据项在 Vue 的实例中，但删除操作要在组件中完成，那么组件如何才能删除 Vue 实例中的数据呢？此时就涉及到参数传递与事件分发了，Vue 为我们提供了自定义事件的功能很好的帮助我们解决了这个问题；使用 "),e("code",[s._v("this.$emit('自定义事件名', 参数)")]),s._v("，操作过程如下")]),s._v(" "),e("h3",{attrs:{id:"修改创建-vue-实例代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改创建-vue-实例代码"}},[s._v("#")]),s._v(" 修改创建 Vue 实例代码")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("    var vm = new Vue({\n        el: '#vue',\n        data: {\n            todoItems: ['《刀剑神域3》', '《关于我转生成为史莱姆这件事》', '《实力至上主义教室》']\n        },\n        methods: {\n            // 该方法可以被模板中自定义事件触发\n            removeTodoItems: function (index) {\n                console.log(\"删除 \" + this.todoItems[index] + \" 成功\");\n                // splice() 方法向/从数组中添加/删除项目，然后返回被删除的项目，其中 index 为添加/删除项目的位置，1 表示删除的数量\n                this.todoItems.splice(index, 1);\n            }\n        }\n    });\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("p",[s._v("增加了 "),e("code",[s._v("methods")]),s._v(" 对象并定义了一个名为 "),e("code",[s._v("removeTodoItems")]),s._v(" 的方法")]),s._v(" "),e("h3",{attrs:{id:"修改-todo-items-待办内容组件的代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改-todo-items-待办内容组件的代码"}},[s._v("#")]),s._v(" 修改 "),e("code",[s._v("todo-items")]),s._v(" 待办内容组件的代码")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("    Vue.component('todo-items', {\n        props: ['item', 'index'],\n        template: '<li>{{index + 1}}. {{item}} <button @click=\"remove\">删除</button></li>',\n        methods: {\n            remove: function (index) {\n                // 这里的 remove 是自定义事件的名称，需要在 HTML 中使用 v-on:remove 的方式指派\n                this.$emit('remove', index);\n            }\n        }\n    });\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("增加了 "),e("code",[s._v('<button @click="remove">删除</button>')]),s._v(" 元素并绑定了组件中定义的 "),e("code",[s._v("remove")]),s._v(" 事件")]),s._v(" "),e("h3",{attrs:{id:"修改-todo-items-待办内容组件的-html-代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改-todo-items-待办内容组件的-html-代码"}},[s._v("#")]),s._v(" 修改 "),e("code",[s._v("todo-items")]),s._v(" 待办内容组件的 HTML 代码")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('    <todo-items slot="todo-items" v-for="(item, index) in todoItems" v-bind:item="item" v-bind:index="index" :key="index" v-on:remove="removeTodoItems(index)"></todo-items>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("增加了 "),e("code",[s._v('v-on:remove="removeTodoItems(index)"')]),s._v(" 自定义事件，该事件会调用 Vue 实例中定义的名为 "),e("code",[s._v("removeTodoItems")]),s._v(" 的方法")]),s._v(" "),e("h3",{attrs:{id:"测试效果-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试效果-2"}},[s._v("#")]),s._v(" 测试效果")]),s._v(" "),e("p",[e("img",{attrs:{src:"/img/20181223160154.png",alt:""}})]),s._v(" "),e("p",[e("img",{attrs:{src:"/img/20181223160252.png",alt:""}})]),s._v(" "),e("h2",{attrs:{id:"完整的-html"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#完整的-html"}},[s._v("#")]),s._v(" 完整的 HTML")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('    <!DOCTYPE html>\n    <html>\n    <head>\n        <meta charset="UTF-8">\n        <title>布局篇 内容分发与自定义事件</title>\n        <script src="https://cdn.jsdelivr.net/npm/vue@2.5.21/dist/vue.js"><\/script>\n    </head>\n    <body>\n    \n    <div id="vue">\n        <todo>\n            <todo-title slot="todo-title" title="今日动漫推荐"></todo-title>\n            <todo-items slot="todo-items" v-for="(item, index) in todoItems" v-bind:item="item" v-bind:index="index" :key="index" v-on:remove="removeTodoItems(index)"></todo-items>\n        </todo>\n    </div>\n    \n    <script type="text/javascript">\n        // 定义一个待办事项组件\n        Vue.component(\'todo\', {\n            template: \'<div>\\\n                            <slot name="todo-title"></slot>\\\n                            <ul>\\\n                                <slot name="todo-items"></slot>\\\n                            </ul>\\\n                       </div>\'\n        });\n    \n        // 定义一个待办事项标题组件\n        Vue.component(\'todo-title\', {\n            props: [\'title\'],\n            template: \'<div>{{title}}</div>\'\n        });\n    \n        // 定义一个待办事项内容组件\n        Vue.component(\'todo-items\', {\n            props: [\'item\', \'index\'],\n            template: \'<li>{{index + 1}}. {{item}} <button @click="remove">删除</button></li>\',\n            methods: {\n                remove: function (index) {\n                    this.$emit(\'remove\', index);\n                }\n            }\n        });\n    \n        var vm = new Vue({\n            el: \'#vue\',\n            data: {\n                todoItems: [\'《刀剑神域3》\', \'《关于我转生成为史莱姆这件事》\', \'《实力至上主义教室》\']\n            },\n            methods: {\n                // 该方法可以被模板中自定义事件触发\n                removeTodoItems: function (index) {\n                    console.log("删除 " + this.todoItems[index] + " 成功");\n                    this.todoItems.splice(index, 1);\n                }\n            }\n        });\n    <\/script>\n    </body>\n    </html>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br"),e("span",{staticClass:"line-number"},[s._v("49")]),e("br"),e("span",{staticClass:"line-number"},[s._v("50")]),e("br"),e("span",{staticClass:"line-number"},[s._v("51")]),e("br"),e("span",{staticClass:"line-number"},[s._v("52")]),e("br"),e("span",{staticClass:"line-number"},[s._v("53")]),e("br"),e("span",{staticClass:"line-number"},[s._v("54")]),e("br"),e("span",{staticClass:"line-number"},[s._v("55")]),e("br"),e("span",{staticClass:"line-number"},[s._v("56")]),e("br"),e("span",{staticClass:"line-number"},[s._v("57")]),e("br"),e("span",{staticClass:"line-number"},[s._v("58")]),e("br"),e("span",{staticClass:"line-number"},[s._v("59")]),e("br"),e("span",{staticClass:"line-number"},[s._v("60")]),e("br")])])])}),[],!1,null,null,null);t.default=a.exports}}]);