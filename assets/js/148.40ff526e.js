(window.webpackJsonp=window.webpackJsonp||[]).push([[148],{845:function(s,a,t){"use strict";t.r(a);var e=t(5),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"vmware给centos扩容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vmware给centos扩容"}},[s._v("#")]),s._v(" VMWare给CentOS扩容")]),s._v(" "),t("h2",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),t("p",[s._v("今天因为自己的虚拟机满了，无法继续创建Docker镜像，就想着给虚拟机扩容，从原来的20G提升到40G")]),s._v(" "),t("h2",{attrs:{id:"添加新磁盘"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加新磁盘"}},[s._v("#")]),s._v(" 添加新磁盘")]),s._v(" "),t("p",[s._v("首先我们需要关闭我们正在运行的虚拟机，然后找到设置页面，新添加一个20G的硬盘")]),s._v(" "),t("p",[t("img",{attrs:{src:"/images/image-20201202214511360.png",alt:"image-20201202214511360"}})]),s._v(" "),t("h2",{attrs:{id:"进入系统"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进入系统"}},[s._v("#")]),s._v(" 进入系统")]),s._v(" "),t("p",[s._v("然后我们进入系统")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看服务器未挂载的磁盘")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("fdisk")]),s._v(" -l\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:"/images/image-20201202214713601.png",alt:"image-20201202214713601"}})]),s._v(" "),t("p",[s._v("从上图可以看出，服务器的 /dev/vdb 42.9GB 此磁盘未挂载")]),s._v(" "),t("blockquote",[t("p",[s._v("如果此磁盘未挂载最下面会出一类似的话：Disk /dev/sdc doesn't contain a valid partition table")])]),s._v(" "),t("p",[s._v("从下图可以清楚的看到第三个硬盘sdc没有分区。sda和sdb都分区过了。")]),s._v(" "),t("blockquote",[t("p",[s._v("sda：sda1 sda2 sda3")]),s._v(" "),t("p",[s._v("sdb：sdb1 sdb2")])]),s._v(" "),t("p",[t("img",{attrs:{src:"/images/image-20201202214846146.png",alt:"image-20201202214846146"}})]),s._v(" "),t("h2",{attrs:{id:"磁盘分区"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#磁盘分区"}},[s._v("#")]),s._v(" 磁盘分区")]),s._v(" "),t("p",[s._v("下面我们需要对未挂载的磁盘进行分区")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看分区")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("fdisk")]),s._v(" /dev/vdb \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("然后执行下面操作")]),s._v(" "),t("blockquote",[t("p",[s._v("n -> p -> 回车 -> 回车 -> w")]),s._v(" "),t("p",[s._v("大概意思如下：")]),s._v(" "),t("ul",[t("li",[s._v("n：添加一个分区")]),s._v(" "),t("li",[s._v("P：主分区")]),s._v(" "),t("li",[s._v("两个回车指是开始和结束的磁盘扇区大小")]),s._v(" "),t("li",[s._v("w：写入磁盘")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"/images/image-20201202215158513.png",alt:"image-20201202215158513"}})]),s._v(" "),t("p",[s._v("此时虽然已经进行了分区，但是还没有文件系统，所以磁盘依然不能使用")]),s._v(" "),t("h2",{attrs:{id:"格式化磁盘"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#格式化磁盘"}},[s._v("#")]),s._v(" 格式化磁盘")]),s._v(" "),t("p",[s._v("下面我们需要格式化磁盘，然后写入文件系统")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 格式化磁盘，写入文件系统")]),s._v("\nmkfs.ext4 /dev/vdb1 \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("出现如下图这们的界面，就是格式化磁盘写入文件成功：")]),s._v(" "),t("p",[t("img",{attrs:{src:"/images/image-20201202215544386.png",alt:"image-20201202215544386"}})]),s._v(" "),t("h2",{attrs:{id:"挂载新磁盘"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#挂载新磁盘"}},[s._v("#")]),s._v(" 挂载新磁盘")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个新目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /huichengff\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 挂载")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),s._v(" /dev/vdb1  /huichengff\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("如果挂载成功，会出现如下图这样的界面")]),s._v(" "),t("p",[t("img",{attrs:{src:"/images/image-20201202215838271.png",alt:"image-20201202215838271"}})]),s._v(" "),t("h2",{attrs:{id:"查看磁盘信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看磁盘信息"}},[s._v("#")]),s._v(" 查看磁盘信息")]),s._v(" "),t("p",[s._v("当我们再来查所有分区时，用fdisk -l 命令就会多了一个主分区，/dev/vdb1；如下图：")]),s._v(" "),t("p",[s._v("``"),t("img",{attrs:{src:"/images/image-20201202215857121.png",alt:"image-20201202215857121"}})]),s._v(" "),t("h2",{attrs:{id:"开启自动挂载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开启自动挂载"}},[s._v("#")]),s._v(" 开启自动挂载")]),s._v(" "),t("p",[s._v("新创建的分区不能开机自动挂载，每次重启机器都要手动挂载。")]),s._v(" "),t("p",[s._v("设置开机自动挂载需要修改/etc/fstab文件 ；命令如下：")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/fstab\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打开后，在最后一行加入以下代码")]),s._v("\n/dev/vdb1 /huichengff ext4 defaults "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);