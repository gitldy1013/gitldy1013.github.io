(window.webpackJsonp=window.webpackJsonp||[]).push([[567],{1263:function(s,n,t){"use strict";t.r(n);var a=t(5),e=Object(a.a)({},(function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"go语言中文件读写的相关操作。"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#go语言中文件读写的相关操作。"}},[s._v("#")]),s._v(" Go语言中文件读写的相关操作。")]),s._v(" "),t("p",[s._v("文件是什么？")]),s._v(" "),t("p",[s._v("计算机中的文件是存储在外部介质（通常是磁盘）上的数据集合，文件分为文本文件和二进制文件。")]),s._v(" "),t("h2",{attrs:{id:"打开和关闭文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#打开和关闭文件"}},[s._v("#")]),s._v(" 打开和关闭文件")]),s._v(" "),t("p",[t("code",[s._v("os.Open()")]),s._v("函数能够打开一个文件，返回一个"),t("code",[s._v("*File")]),s._v("和一个"),t("code",[s._v("err")]),s._v("。对得到的文件实例调用"),t("code",[s._v("close()")]),s._v("方法能够关闭文件。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('    package main\n    \n    import (\n    \t"fmt"\n    \t"os"\n    )\n    \n    func main() {\n    \t// 只读方式打开当前目录下的main.go文件\n    \tfile, err := os.Open("./main.go")\n    \tif err != nil {\n    \t\tfmt.Println("open file failed!, err:", err)\n    \t\treturn\n    \t}\n    \t// 关闭文件\n    \tfile.Close()\n    }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[s._v("为了防止文件忘记关闭，我们通常使用defer注册文件关闭语句。")]),s._v(" "),t("h2",{attrs:{id:"读取文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#读取文件"}},[s._v("#")]),s._v(" 读取文件")]),s._v(" "),t("h3",{attrs:{id:"file-read"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#file-read"}},[s._v("#")]),s._v(" file.Read()")]),s._v(" "),t("h4",{attrs:{id:"基本使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本使用"}},[s._v("#")]),s._v(" 基本使用")]),s._v(" "),t("p",[s._v("Read方法定义如下：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("    func (f *File) Read(b []byte) (n int, err error)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("它接收一个字节切片，返回读取的字节数和可能的具体错误，读到文件末尾时会返回"),t("code",[s._v("0")]),s._v("和"),t("code",[s._v("io.EOF")]),s._v("。 举个例子：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('    func main() {\n    \t// 只读方式打开当前目录下的main.go文件\n    \tfile, err := os.Open("./main.go")\n    \tif err != nil {\n    \t\tfmt.Println("open file failed!, err:", err)\n    \t\treturn\n    \t}\n    \tdefer file.Close()\n    \t// 使用Read方法读取数据\n    \tvar tmp = make([]byte, 128)\n    \tn, err := file.Read(tmp)\n    \tif err == io.EOF {\n    \t\tfmt.Println("文件读完了")\n    \t\treturn\n    \t}\n    \tif err != nil {\n    \t\tfmt.Println("read file failed, err:", err)\n    \t\treturn\n    \t}\n    \tfmt.Printf("读取了%d字节数据\\n", n)\n    \tfmt.Println(string(tmp[:n]))\n    }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("h4",{attrs:{id:"循环读取"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#循环读取"}},[s._v("#")]),s._v(" 循环读取")]),s._v(" "),t("p",[s._v("使用for循环读取文件中的所有数据。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('    func main() {\n    \t// 只读方式打开当前目录下的main.go文件\n    \tfile, err := os.Open("./main.go")\n    \tif err != nil {\n    \t\tfmt.Println("open file failed!, err:", err)\n    \t\treturn\n    \t}\n    \tdefer file.Close()\n    \t// 循环读取文件\n    \tvar content []byte\n    \tvar tmp = make([]byte, 128)\n    \tfor {\n    \t\tn, err := file.Read(tmp)\n    \t\tif err == io.EOF {\n    \t\t\tfmt.Println("文件读完了")\n    \t\t\tbreak\n    \t\t}\n    \t\tif err != nil {\n    \t\t\tfmt.Println("read file failed, err:", err)\n    \t\t\treturn\n    \t\t}\n    \t\tcontent = append(content, tmp[:n]...)\n    \t}\n    \tfmt.Println(string(content))\n    }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br")])]),t("h3",{attrs:{id:"bufio读取文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bufio读取文件"}},[s._v("#")]),s._v(" bufio读取文件")]),s._v(" "),t("p",[s._v("bufio是在file的基础上封装了一层API，支持更多的功能。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('    package main\n    \n    import (\n    \t"bufio"\n    \t"fmt"\n    \t"io"\n    \t"os"\n    )\n    \n    // bufio按行读取示例\n    func main() {\n    \tfile, err := os.Open("./xx.txt")\n    \tif err != nil {\n    \t\tfmt.Println("open file failed, err:", err)\n    \t\treturn\n    \t}\n    \tdefer file.Close()\n    \treader := bufio.NewReader(file)\n    \tfor {\n    \t\tline, err := reader.ReadString(\'\\n\') //注意是字符\n    \t\tif err == io.EOF {\n    \t\t\tif len(line) != 0 {\n    \t\t\t\tfmt.Println(line)\n    \t\t\t}\n    \t\t\tfmt.Println("文件读完了")\n    \t\t\tbreak\n    \t\t}\n    \t\tif err != nil {\n    \t\t\tfmt.Println("read file failed, err:", err)\n    \t\t\treturn\n    \t\t}\n    \t\tfmt.Print(line)\n    \t}\n    }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br")])]),t("h3",{attrs:{id:"ioutil读取整个文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ioutil读取整个文件"}},[s._v("#")]),s._v(" ioutil读取整个文件")]),s._v(" "),t("p",[t("code",[s._v("io/ioutil")]),s._v("包的"),t("code",[s._v("ReadFile")]),s._v("方法能够读取完整的文件，只需要将文件名作为参数传入。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('    package main\n    \n    import (\n    \t"fmt"\n    \t"io/ioutil"\n    )\n    \n    // ioutil.ReadFile读取整个文件\n    func main() {\n    \tcontent, err := ioutil.ReadFile("./main.go")\n    \tif err != nil {\n    \t\tfmt.Println("read file failed, err:", err)\n    \t\treturn\n    \t}\n    \tfmt.Println(string(content))\n    }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("h2",{attrs:{id:"文件写入操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文件写入操作"}},[s._v("#")]),s._v(" 文件写入操作")]),s._v(" "),t("p",[t("code",[s._v("os.OpenFile()")]),s._v("函数能够以指定模式打开文件，从而实现文件写入相关功能。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("    func OpenFile(name string, flag int, perm FileMode) (*File, error) {\n    \t...\n    }\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("其中：")]),s._v(" "),t("p",[t("code",[s._v("name")]),s._v("：要打开的文件名 "),t("code",[s._v("flag")]),s._v("：打开文件的模式。 模式有以下几种：")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("模式")]),s._v(" "),t("th",[s._v("含义")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("os.O_WRONLY")]),s._v(" "),t("td",[s._v("只写")])]),s._v(" "),t("tr",[t("td",[s._v("os.O_CREATE")]),s._v(" "),t("td",[s._v("创建文件")])]),s._v(" "),t("tr",[t("td",[s._v("os.O_RDONLY")]),s._v(" "),t("td",[s._v("只读")])]),s._v(" "),t("tr",[t("td",[s._v("os.O_RDWR")]),s._v(" "),t("td",[s._v("读写")])]),s._v(" "),t("tr",[t("td",[s._v("os.O_TRUNC")]),s._v(" "),t("td",[s._v("清空")])]),s._v(" "),t("tr",[t("td",[s._v("os.O_APPEND")]),s._v(" "),t("td",[s._v("追加")])])])]),s._v(" "),t("p",[t("code",[s._v("perm")]),s._v("：文件权限，一个八进制数。r（读）04，w（写）02，x（执行）01。")]),s._v(" "),t("h3",{attrs:{id:"write和writestring"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#write和writestring"}},[s._v("#")]),s._v(" Write和WriteString")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('    func main() {\n    \tfile, err := os.OpenFile("xx.txt", os.O_CREATE|os.O_TRUNC|os.O_WRONLY, 0666)\n    \tif err != nil {\n    \t\tfmt.Println("open file failed, err:", err)\n    \t\treturn\n    \t}\n    \tdefer file.Close()\n    \tstr := "hello 沙河"\n    \tfile.Write([]byte(str))       //写入字节切片数据\n    \tfile.WriteString("hello 小王子") //直接写入字符串数据\n    }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"bufio-newwriter"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bufio-newwriter"}},[s._v("#")]),s._v(" bufio.NewWriter")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('    func main() {\n    \tfile, err := os.OpenFile("xx.txt", os.O_CREATE|os.O_TRUNC|os.O_WRONLY, 0666)\n    \tif err != nil {\n    \t\tfmt.Println("open file failed, err:", err)\n    \t\treturn\n    \t}\n    \tdefer file.Close()\n    \twriter := bufio.NewWriter(file)\n    \tfor i := 0; i < 10; i++ {\n    \t\twriter.WriteString("hello沙河\\n") //将数据先写入缓存\n    \t}\n    \twriter.Flush() //将缓存中的内容写入文件\n    }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h3",{attrs:{id:"ioutil-writefile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ioutil-writefile"}},[s._v("#")]),s._v(" ioutil.WriteFile")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('    func main() {\n    \tstr := "hello 沙河"\n    \terr := ioutil.WriteFile("./xx.txt", []byte(str), 0666)\n    \tif err != nil {\n    \t\tfmt.Println("write file failed, err:", err)\n    \t\treturn\n    \t}\n    }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h2",{attrs:{id:"练习"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#练习"}},[s._v("#")]),s._v(" 练习")]),s._v(" "),t("h3",{attrs:{id:"copyfile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#copyfile"}},[s._v("#")]),s._v(" copyFile")]),s._v(" "),t("p",[s._v("借助"),t("code",[s._v("io.Copy()")]),s._v("实现一个拷贝文件函数。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('    // CopyFile 拷贝文件函数\n    func CopyFile(dstName, srcName string) (written int64, err error) {\n    \t// 以读方式打开源文件\n    \tsrc, err := os.Open(srcName)\n    \tif err != nil {\n    \t\tfmt.Printf("open %s failed, err:%v.\\n", srcName, err)\n    \t\treturn\n    \t}\n    \tdefer src.Close()\n    \t// 以写|创建的方式打开目标文件\n    \tdst, err := os.OpenFile(dstName, os.O_WRONLY|os.O_CREATE, 0644)\n    \tif err != nil {\n    \t\tfmt.Printf("open %s failed, err:%v.\\n", dstName, err)\n    \t\treturn\n    \t}\n    \tdefer dst.Close()\n    \treturn io.Copy(dst, src) //调用io.Copy()拷贝内容\n    }\n    func main() {\n    \t_, err := CopyFile("dst.txt", "src.txt")\n    \tif err != nil {\n    \t\tfmt.Println("copy file failed, err:", err)\n    \t\treturn\n    \t}\n    \tfmt.Println("copy done!")\n    }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br")])]),t("h3",{attrs:{id:"实现一个cat命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实现一个cat命令"}},[s._v("#")]),s._v(" 实现一个cat命令")]),s._v(" "),t("p",[s._v("使用文件操作相关知识，模拟实现linux平台"),t("code",[s._v("cat")]),s._v("命令的功能。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('    package main\n    \n    import (\n    \t"bufio"\n    \t"flag"\n    \t"fmt"\n    \t"io"\n    \t"os"\n    )\n    \n    // cat命令实现\n    func cat(r *bufio.Reader) {\n    \tfor {\n    \t\tbuf, err := r.ReadBytes(\'\\n\') //注意是字符\n    \t\tif err == io.EOF {\n    \t\t\tbreak\n    \t\t}\n    \t\tfmt.Fprintf(os.Stdout, "%s", buf)\n    \t}\n    }\n    \n    func main() {\n    \tflag.Parse() // 解析命令行参数\n    \tif flag.NArg() == 0 {\n    \t\t// 如果没有参数默认从标准输入读取内容\n    \t\tcat(bufio.NewReader(os.Stdin))\n    \t}\n    \t// 依次读取每个指定文件的内容并打印到终端\n    \tfor i := 0; i < flag.NArg(); i++ {\n    \t\tf, err := os.Open(flag.Arg(i))\n    \t\tif err != nil {\n    \t\t\tfmt.Fprintf(os.Stdout, "reading from %s failed, err:%v\\n", flag.Arg(i), err)\n    \t\t\tcontinue\n    \t\t}\n    \t\tcat(bufio.NewReader(f))\n    \t}\n    }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br")])])])}),[],!1,null,null,null);n.default=e.exports}}]);