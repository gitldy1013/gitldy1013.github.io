(window.webpackJsonp=window.webpackJsonp||[]).push([[919],{1615:function(s,n,a){"use strict";a.r(n);var e=a(5),r=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"基础设施"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基础设施"}},[s._v("#")]),s._v(" 基础设施")]),s._v(" "),a("h2",{attrs:{id:"概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[s._v("#")]),s._v(" 概述")]),s._v(" "),a("p",[s._v("本章节为开发所需各种服务的"),a("code",[s._v("docker-compose.yml")]),s._v(" 配置文件")]),s._v(" "),a("h2",{attrs:{id:"mysql-8-x"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql-8-x"}},[s._v("#")]),s._v(" MySQL 8.x")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    version: '3.1'\n    services:\n      db:\n        image: mysql\n        restart: always\n        environment:\n          MYSQL_ROOT_PASSWORD: 123456\n        command:\n          --default-authentication-plugin=mysql_native_password\n          --character-set-server=utf8mb4\n          --collation-server=utf8mb4_general_ci\n          --explicit_defaults_for_timestamp=true\n          --lower_case_table_names=1\n        ports:\n          - 3306:3306\n        volumes:\n          - ./data:/var/lib/mysql\n    \n      adminer:\n        image: adminer\n        restart: always\n        ports:\n          - 8080:8080\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br")])]),a("h2",{attrs:{id:"gitlab"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gitlab"}},[s._v("#")]),s._v(" GitLab")]),s._v(" "),a("p",[s._v("参考 "),a("RouterLink",{attrs:{to:"/zh/gitlab/#什么是-git"}},[a("strong",[s._v("GitLab")])]),s._v(" 博文")],1),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    version: '3'\n    services:\n        web:\n          image: 'twang2218/gitlab-ce-zh'\n          restart: always\n          hostname: '192.168.10.132'\n          environment:\n            TZ: 'Asia/Shanghai'\n            GITLAB_OMNIBUS_CONFIG: |\n              external_url 'http://192.168.10.132:8080'\n              gitlab_rails['gitlab_shell_ssh_port'] = 2222\n              unicorn['port'] = 8888\n              nginx['listen_port'] = 8080\n          ports:\n            - '8080:8080'\n            - '8443:443'\n            - '2222:22'\n          volumes:\n            - ./config:/etc/gitlab\n            - ./data:/var/opt/gitlab\n            - ./logs:/var/log/gitlab\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("h2",{attrs:{id:"nexus"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nexus"}},[s._v("#")]),s._v(" Nexus")]),s._v(" "),a("p",[s._v("参考 "),a("RouterLink",{attrs:{to:"/zh/nexus/#什么是-nexus"}},[a("strong",[s._v("Nexus")])]),s._v(" 博文")],1),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    version: '3.1'\n    services:\n      nexus:\n        restart: always\n        image: sonatype/nexus3\n        container_name: nexus\n        ports:\n          - 8081:8081\n        volumes:\n          - data:/nexus-data\n    \n    volumes:\n      data:\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h2",{attrs:{id:"registry"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#registry"}},[s._v("#")]),s._v(" Registry")]),s._v(" "),a("p",[s._v("参考 "),a("RouterLink",{attrs:{to:"/zh/registry/#安装-docker-registry-私服"}},[a("strong",[s._v("Registry")])]),s._v(" 博文")],1),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    version: '3.1'\n    services:\n      registry:\n        image: registry\n        restart: always\n        container_name: registry\n        ports:\n          - 5000:5000\n        volumes:\n          - ./data:/var/lib/registry\n    \n      frontend:\n        image: konradkleine/docker-registry-frontend:v2\n        restart: always\n        ports:\n          - 8080:80\n        volumes:\n          - ./certs/frontend.crt:/etc/apache2/server.crt:ro\n          - ./certs/frontend.key:/etc/apache2/server.key:ro\n        environment:\n          - ENV_DOCKER_REGISTRY_HOST=192.168.10.139\n          - ENV_DOCKER_REGISTRY_PORT=5000\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("h2",{attrs:{id:"jenkins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jenkins"}},[s._v("#")]),s._v(" Jenkins")]),s._v(" "),a("p",[s._v("参考 "),a("RouterLink",{attrs:{to:"/zh/apache-dubbo-ci/什么是-Jenkins.html#什么是-jenkins"}},[a("strong",[s._v("Jenkins")])]),s._v(" 博文")],1),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    version: '3.1'\n    services:\n      jenkins:\n        restart: always\n        image: jenkinsci/jenkins\n        container_name: jenkins\n        ports:\n          - 8080:8080\n          - 50000:50000\n        environment:\n          TZ: Asia/Shanghai\n        volumes:\n          - data:/var/jenkins_home\n    \n    volumes:\n      data:\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("h2",{attrs:{id:"skywalking"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#skywalking"}},[s._v("#")]),s._v(" SkyWalking")]),s._v(" "),a("p",[s._v("操作步骤同 "),a("RouterLink",{attrs:{to:"/zh/spring-cloud-alibaba/SkyWalking-服务端配置.html#skywalking-服务端配置"}},[a("strong",[s._v("SkyWalking 服务端配置")])]),s._v(" ，执行的脚本为 "),a("code",[s._v("startup.sh")]),s._v("，在此之前别忘记在 Linux 上安装 Java 哦！")],1),s._v(" "),a("h2",{attrs:{id:"rocketmq"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rocketmq"}},[s._v("#")]),s._v(" RocketMQ")]),s._v(" "),a("p",[s._v("参考 "),a("RouterLink",{attrs:{to:"/zh/spring-cloud-alibaba/RocketMQ-简介.html#rocketmq-简介"}},[a("strong",[s._v("RocketMQ")])]),s._v(" 博文")],1),s._v(" "),a("p",[a("code",[s._v("./data/brokerconf/broker.conf")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    brokerClusterName=DefaultCluster\n    brokerName=broker-a\n    brokerId=0\n    brokerIP1=192.168.10.149\n    defaultTopicQueueNums=4\n    autoCreateTopicEnable=true\n    autoCreateSubscriptionGroup=true\n    listenPort=10911\n    deleteWhen=04\n    fileReservedTime=120\n    mapedFileSizeCommitLog=1073741824\n    mapedFileSizeConsumeQueue=300000\n    diskMaxUsedSpaceRatio=88\n    maxMessageSize=65536\n    brokerRole=ASYNC_MASTER\n    flushDiskType=ASYNC_FLUSH\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[a("code",[s._v("docker-compose.yml")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('    version: \'3.5\'\n    services:\n      rmqnamesrv:\n        image: foxiswho/rocketmq:server\n        container_name: rmqnamesrv\n        restart: always\n        ports:\n          - 9876:9876\n        volumes:\n          - ./data/logs:/opt/logs\n          - ./data/store:/opt/store\n        networks:\n            rmq:\n              aliases:\n                - rmqnamesrv\n    \n      rmqbroker:\n        image: foxiswho/rocketmq:broker\n        container_name: rmqbroker\n        restart: always\n        ports:\n          - 10909:10909\n          - 10911:10911\n        volumes:\n          - ./data/logs:/opt/logs\n          - ./data/store:/opt/store\n          - ./data/brokerconf/broker.conf:/etc/rocketmq/broker.conf\n        environment:\n            NAMESRV_ADDR: "rmqnamesrv:9876"\n            JAVA_OPTS: " -Duser.home=/opt"\n            JAVA_OPT_EXT: "-server -Xms128m -Xmx128m -Xmn128m"\n        command: mqbroker -c /etc/rocketmq/broker.conf\n        depends_on:\n          - rmqnamesrv\n        networks:\n          rmq:\n            aliases:\n              - rmqbroker\n    \n      rmqconsole:\n        image: styletang/rocketmq-console-ng\n        container_name: rmqconsole\n        restart: always\n        ports:\n          - 8080:8080\n        environment:\n            JAVA_OPTS: "-Drocketmq.namesrv.addr=rmqnamesrv:9876 -Dcom.rocketmq.sendMessageWithVIPChannel=false"\n        depends_on:\n          - rmqnamesrv\n        networks:\n          rmq:\n            aliases:\n              - rmqconsole\n    \n    networks:\n      rmq:\n        name: rmq\n        driver: bridge\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br")])]),a("h2",{attrs:{id:"nacos"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nacos"}},[s._v("#")]),s._v(" Nacos")]),s._v(" "),a("p",[s._v("参考 "),a("RouterLink",{attrs:{to:"/zh/spring-cloud-alibaba/服务注册与发现.html#服务注册与发现"}},[a("strong",[s._v("Nacos")])]),s._v(" 博文")],1),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    git clone https://github.com/nacos-group/nacos-docker.git\n    cd nacos-docker\n    docker-compose -f example/standalone-mysql.yaml up\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("控制台：http://127.0.0.1:8848/nacos/")]),s._v(" "),a("h2",{attrs:{id:"sentinel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sentinel"}},[s._v("#")]),s._v(" Sentinel")]),s._v(" "),a("p",[s._v("操作步骤同 "),a("RouterLink",{attrs:{to:"/zh/spring-cloud-alibaba/使用熔断器仪表盘监控.html#使用熔断器仪表盘监控"}},[a("strong",[s._v("使用熔断器仪表盘监控")])]),s._v(" ，在此之前别忘记在 Linux 上安装 Java 和 Maven 哦！")],1),s._v(" "),a("h2",{attrs:{id:"nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[s._v("#")]),s._v(" Nginx")]),s._v(" "),a("p",[s._v("参考 "),a("RouterLink",{attrs:{to:"/zh/apache-dubbo-codeing/什么是-Nginx.html#什么是-nginx"}},[a("strong",[s._v("Nginx")])]),s._v(" 博文")],1),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    version: '3.1'\n    services:\n      nginx:\n        restart: always\n        image: nginx\n        container_name: nginx\n        ports:\n          - 80:80\n        volumes:\n          - ./conf/nginx.conf:/etc/nginx/nginx.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h2",{attrs:{id:"redis-ha"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis-ha"}},[s._v("#")]),s._v(" Redis HA")]),s._v(" "),a("p",[s._v("参考 "),a("RouterLink",{attrs:{to:"/zh/apache-dubbo-codeing/Redis-简介.html#redis-简介"}},[a("strong",[s._v("Redis")])]),s._v(" 博文")],1),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    version: '3.1'\n    services:\n      master:\n        image: redis\n        container_name: redis-master\n        ports:\n          - 6379:6379\n    \n      slave1:\n        image: redis\n        container_name: redis-slave-1\n        ports:\n          - 6380:6379\n        command: redis-server --slaveof redis-master 6379\n    \n      slave2:\n        image: redis\n        container_name: redis-slave-2\n        ports:\n          - 6381:6379\n        command: redis-server --slaveof redis-master 6379\n    \n      sentinel1:\n        image: redis\n        container_name: redis-sentinel-1\n        ports:\n          - 26379:26379\n        command: redis-sentinel /usr/local/etc/redis/sentinel.conf\n        volumes:\n          - ./sentinel1.conf:/usr/local/etc/redis/sentinel.conf\n    \n      sentinel2:\n        image: redis\n        container_name: redis-sentinel-2\n        ports:\n          - 26380:26379\n        command: redis-sentinel /usr/local/etc/redis/sentinel.conf\n        volumes:\n          - ./sentinel2.conf:/usr/local/etc/redis/sentinel.conf\n    \n      sentinel3:\n        image: redis\n        container_name: redis-sentinel-3\n        ports:\n          - 26381:26379\n        command: redis-sentinel /usr/local/etc/redis/sentinel.conf\n        volumes:\n          - ./sentinel3.conf:/usr/local/etc/redis/sentinel.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br")])]),a("p",[s._v("sentinel.conf")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    port 26379\n    dir /tmp\n    # 自定义集群名，其中 127.0.0.1 为 redis-master 的 ip，6379 为 redis-master 的端口，2 为最小投票数（因为有 3 台 Sentinel 所以可以设置成 2）\n    sentinel monitor mymaster 127.0.0.1 6379 2\n    sentinel down-after-milliseconds mymaster 30000\n    sentinel parallel-syncs mymaster 1\n    sentinel failover-timeout mymaster 180000\n    sentinel deny-scripts-reconfig yes\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h2",{attrs:{id:"附-环境变量配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#附-环境变量配置"}},[s._v("#")]),s._v(" 附：环境变量配置")]),s._v(" "),a("p",[s._v("/etc/environment")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games"\n    \n    export JAVA_HOME=/usr/local/jdk1.8.0_152\n    export JRE_HOME=/usr/local/jdk1.8.0_152/jre\n    export MAVEN_HOME=/usr/local/apache-maven-3.5.3\n    export CLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib:$MAVEN_HOME/bin\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("/etc/profile")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    export JAVA_HOME=/usr/local/jdk1.8.0_152\n    export JRE_HOME=/usr/local/jdk1.8.0_152/jre\n    export MAVEN_HOME=/usr/local/apache-maven-3.5.3\n    export CLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib\n    export PATH=$JAVA_HOME/bin:$JAVA_HOME/jre/bin:$PATH:$HOME/bin:$MAVEN_HOME/bin\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])])}),[],!1,null,null,null);n.default=r.exports}}]);