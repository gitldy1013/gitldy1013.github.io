(window.webpackJsonp=window.webpackJsonp||[]).push([[134],{830:function(e,v,l){"use strict";l.r(v);var _=l(5),t=Object(_.a)({},(function(){var e=this,v=e.$createElement,l=e._self._c||v;return l("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[l("h1",{attrs:{id:"kubeadm和二进制方式对比"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#kubeadm和二进制方式对比"}},[e._v("#")]),e._v(" Kubeadm和二进制方式对比")]),e._v(" "),l("h2",{attrs:{id:"kubeadm方式搭建k8s集群"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#kubeadm方式搭建k8s集群"}},[e._v("#")]),e._v(" Kubeadm方式搭建K8S集群")]),e._v(" "),l("ul",[l("li",[l("p",[e._v("安装虚拟机，在虚拟机安装Linux操作系统【3台虚拟机】")])]),e._v(" "),l("li",[l("p",[e._v("对操作系统初始化操作")])]),e._v(" "),l("li",[l("p",[e._v("所有节点安装Docker、kubeadm、kubelet、kubectl【包含master和slave节点】")]),e._v(" "),l("ul",[l("li",[e._v("安装docker、使用yum，不指定版本默认安装最新的docker版本")]),e._v(" "),l("li",[e._v("修改docker仓库地址，yum源地址，改为阿里云地址")]),e._v(" "),l("li",[e._v("安装kubeadm，kubelet 和 kubectl\n"),l("ul",[l("li",[e._v("k8s已经发布最新的1.19版本，可以指定版本安装，不指定安装最新版本")]),e._v(" "),l("li",[l("code",[e._v("yum install -y kubelet kubeadm kubectl")])])])])])]),e._v(" "),l("li",[l("p",[e._v("在master节点执行初始化命令操作")]),e._v(" "),l("ul",[l("li",[l("code",[e._v("kubeadm init")])]),e._v(" "),l("li",[e._v("默认拉取镜像地址 K8s.gcr.io国内地址，需要使用国内地址")])])]),e._v(" "),l("li",[l("p",[e._v("安装网络插件(CNI)")]),e._v(" "),l("ul",[l("li",[l("code",[e._v("kubectl apply -f kube-flannel.yml")])]),e._v(" "),l("li")])]),e._v(" "),l("li",[l("p",[e._v("在所有的node节点上，使用join命令，把node添加到master节点上")])]),e._v(" "),l("li",[l("p",[e._v("测试kubernetes集群")])])]),e._v(" "),l("h2",{attrs:{id:"二进制方式搭建k8s集群"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#二进制方式搭建k8s集群"}},[e._v("#")]),e._v(" 二进制方式搭建K8S集群")]),e._v(" "),l("ul",[l("li",[e._v("安装虚拟机和操作系统，对操作系统进行初始化操作")]),e._v(" "),l("li",[e._v("生成cfssl 自签证书\n"),l("ul",[l("li",[l("code",[e._v("ca-key.pem")]),e._v("、"),l("code",[e._v("ca.pem")])]),e._v(" "),l("li",[l("code",[e._v("server-key.pem")]),e._v("、"),l("code",[e._v("server.pem")])])])]),e._v(" "),l("li",[e._v("部署Etcd集群\n"),l("ul",[l("li",[e._v("部署的本质，就是把etcd集群交给 systemd 管理")]),e._v(" "),l("li",[e._v("把生成的证书复制过来，启动，设置开机启动")])])]),e._v(" "),l("li",[e._v("为apiserver自签证书，生成过程和etcd类似")]),e._v(" "),l("li",[e._v("部署master组件，主要包含以下组件\n"),l("ul",[l("li",[e._v("apiserver")]),e._v(" "),l("li",[e._v("controller-manager")]),e._v(" "),l("li",[e._v("scheduler")]),e._v(" "),l("li",[e._v("交给systemd管理，并设置开机启动")]),e._v(" "),l("li",[e._v("如果要安装最新的1.19版本，下载二进制文件进行安装")])])]),e._v(" "),l("li",[e._v("部署node组件\n"),l("ul",[l("li",[e._v("docker")]),e._v(" "),l("li",[e._v("kubelet")]),e._v(" "),l("li",[e._v("kube-proxy【需要批准kubelet证书申请加入集群】")]),e._v(" "),l("li",[e._v("交给systemd管理组件- 组件启动，设置开机启动")])])]),e._v(" "),l("li",[e._v("批准kubelet证书申请 并加入集群")]),e._v(" "),l("li",[e._v("部署CNI网络插件")]),e._v(" "),l("li",[e._v("测试Kubernets集群【安装nginx测试】")])])])}),[],!1,null,null,null);v.default=t.exports}}]);