(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{717:function(s,a,e){"use strict";e.r(a);var t=e(5),r=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"docker图形化工具portainer介绍与安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker图形化工具portainer介绍与安装"}},[s._v("#")]),s._v(" Docker图形化工具Portainer介绍与安装")]),s._v(" "),e("h2",{attrs:{id:"介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[s._v("#")]),s._v(" 介绍")]),s._v(" "),e("p",[s._v("Portainer是一款轻量级的图形化管理工具，通过它我们可以轻松管理不同的Docker环境。Portainer部署和使用都非常简单，它提供一个可以运行在任何docker引擎上的容器组成。Portainer提供管理docker的container、images、volumes、networks等等。它兼容独立的docker环境和swarm集群模式。基本满足中小型单位对docker容器的管理工作。")]),s._v(" "),e("p",[s._v("官方提供的Demo演示环境：")]),s._v(" "),e("ul",[e("li",[s._v("地址：http://demo.portainer.io")]),s._v(" "),e("li",[s._v("用户名：admin")]),s._v(" "),e("li",[s._v("密码：tryportainer")])]),s._v(" "),e("p",[e("img",{attrs:{src:"/images/image-20201125165926451.png",alt:"image-20201125165926451"}})]),s._v(" "),e("h2",{attrs:{id:"docker方式安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker方式安装"}},[s._v("#")]),s._v(" Docker方式安装")]),s._v(" "),e("p",[s._v("我们可以直接使用Docker的方式来安装")]),s._v(" "),e("p",[s._v("首先创建数据卷，实现数据持久化")]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume create portainer_db\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("启动Partainer容器")]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -d -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("9000")]),s._v(":9000 -name portainer -restart always -v /var/run/docker/sock:/var/run/docker.sock -v portainer_db:/data portainer/portainer\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("运行成功后，然后通过 9000端口访问即可")]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("http://ip:9000\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("然后我们输入自定义的密码，进入下面页面")]),s._v(" "),e("p",[e("img",{attrs:{src:"/images/image-20201125170935817.png",alt:"image-20201125170935817"}})]),s._v(" "),e("p",[s._v("这里是选择我们通过portainer管理哪里的Docker")]),s._v(" "),e("ul",[e("li",[s._v("Local：本地的")]),s._v(" "),e("li",[s._v("Remote：远程的")]),s._v(" "),e("li",[s._v("Agent：")]),s._v(" "),e("li",[s._v("Azure：云服务")])]),s._v(" "),e("h2",{attrs:{id:"docker-compose-方式安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-方式安装"}},[s._v("#")]),s._v(" Docker Compose 方式安装")]),s._v(" "),e("p",[s._v("这里我们主要是通过Docker Compose来进行安装【如果没有安装docker-compose，需要提前安装】")]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建 目录")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入目录")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建配置文件")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" mogu_portainer.yml\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("然后添加如下内容")]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("version: "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3.1'")]),s._v("\nservices:\n  portainer:\n    image: portainer/portainer\n    container_name: portainer\n    ports:\n      - "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("9000")]),s._v(":9000\n      - "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8000")]),s._v(":8000\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - ./data:/data\n      - ./public:/public\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("p",[s._v("然后在执行汉化")]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载汉化包")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://dl.quchao.net/Soft/Portainer-CN.zip\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压缩")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" Portainer-CN.zip -d public\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("然后运行下面命令")]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" -f mogu_portainer.yml up -d\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("构建portainer容器后，我们访问下面页面")]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("http://ip:9000\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("即可看到我们的图形化页面了【首次登录需要填写默认密码】")]),s._v(" "),e("p",[e("img",{attrs:{src:"/images/image-20201125170457260.png",alt:"image-20201125170457260"}})]),s._v(" "),e("p",[s._v("登录后，即可看到我们的容器信息")]),s._v(" "),e("p",[e("img",{attrs:{src:"/images/image-20201125170509940.png",alt:"image-20201125170509940"}})]),s._v(" "),e("h2",{attrs:{id:"使用portainer管理其它主机"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用portainer管理其它主机"}},[s._v("#")]),s._v(" 使用Portainer管理其它主机")]),s._v(" "),e("p",[s._v("刚刚演示的是使用Portainer管理本地安装的Docker主机，如果我们要使用portainer管理其它地方的主机。我们就需要单独启动一台主机，然后在上面运行Docker，需要注意：我们还需要开启Docker中的 2375端口号")]),s._v(" "),e("p",[s._v("首先我们编辑 daemon.json")]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/docker/daemon.json\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("然后加入以下内容即可【注意2375端口号要慎开，不然可能被当肉鸡挖矿】")]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hosts"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tcp://192.168.119.150:2375"')]),s._v(", "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"unix:///var/run/docker.sock"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("然后选择 端点 的 添加端点")]),s._v(" "),e("p",[e("img",{attrs:{src:"/images/image-20201125171521404.png",alt:"image-20201125171521404"}})]),s._v(" "),e("p",[s._v("然后选择Docker环境")]),s._v(" "),e("p",[e("img",{attrs:{src:"/images/image-20201125171656316.png",alt:"image-20201125171656316"}})]),s._v(" "),e("p",[s._v("最后添加端点完后，就能看到我们刚刚添加的节点了")]),s._v(" "),e("p",[e("img",{attrs:{src:"/images/image-20201125171714621.png",alt:"image-20201125171714621"}})]),s._v(" "),e("p",[s._v("我们回到首页，即可看到我们的两台Docker服务了")]),s._v(" "),e("p",[e("img",{attrs:{src:"/images/image-20201125171745766.png",alt:"image-20201125171745766"}})]),s._v(" "),e("h2",{attrs:{id:"使用portainer部署nginx服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用portainer部署nginx服务"}},[s._v("#")]),s._v(" 使用Portainer部署Nginx服务")]),s._v(" "),e("p",[s._v("下面我们就可以使用Portainer来部署我们的nginx服务，到指定的Docker环境中，由于我们目前有多台Docker环境，因此我们就首先需要选择不同的主机来进行部署")]),s._v(" "),e("p",[s._v("首先，我们选择 192.168.119.148 这台主机")]),s._v(" "),e("p",[e("img",{attrs:{src:"/images/image-20201125171940237.png",alt:"image-20201125171940237"}})]),s._v(" "),e("p",[s._v("然后选择镜像，输入 nginx，点击拉取镜像")]),s._v(" "),e("p",[e("img",{attrs:{src:"/images/image-20201125172117416.png",alt:"image-20201125172117416"}})]),s._v(" "),e("p",[s._v("然后就会去拉取到我们的nginx镜像了，下面我们就可以使用这个拉取的镜像来创建容器")]),s._v(" "),e("p",[s._v("我们输入一些基本信息后，点击创建")]),s._v(" "),e("p",[e("img",{attrs:{src:"/images/image-20201125172337667.png",alt:"image-20201125172337667"}})]),s._v(" "),e("p",[s._v("完成后，即可看到 nginx的端口号已经对外发布")]),s._v(" "),e("p",[e("img",{attrs:{src:"/images/image-20201125172622053.png",alt:"image-20201125172622053"}})]),s._v(" "),e("p",[s._v("我们输入下面的地址")]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("http://ip:32768\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("即可看到，nginx已经成功安装")]),s._v(" "),e("p",[e("img",{attrs:{src:"/images/image-20201125172719198.png",alt:"image-20201125172719198"}})])])}),[],!1,null,null,null);a.default=r.exports}}]);