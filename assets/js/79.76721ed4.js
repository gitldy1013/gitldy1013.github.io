(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{776:function(a,t,s){"use strict";s.r(t);var e=s(5),r=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"使用goctl快速创建项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用goctl快速创建项目"}},[a._v("#")]),a._v(" 使用goctl快速创建项目")]),a._v(" "),s("h2",{attrs:{id:"前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[a._v("#")]),a._v(" 前言")]),a._v(" "),s("p",[a._v("刚刚了解完 "),s("a",{attrs:{href:"https://gitee.com/kevwan/go-zero",target:"_blank",rel:"noopener noreferrer"}},[a._v("go-zero项目"),s("OutboundLink")],1),a._v(" 的 "),s("a",{attrs:{href:"https://www.bilibili.com/video/BV1rD4y127PD/",target:"_blank",rel:"noopener noreferrer"}},[a._v("架构设计"),s("OutboundLink")],1),a._v("，Kevin老师也讲的非常通俗易懂，能够很好的把一些理念和SpringCloud的思想对应起来，下面就开始正式学习一下go-zero项目了~")]),a._v(" "),s("h2",{attrs:{id:"下载go代码生成工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载go代码生成工具"}},[a._v("#")]),a._v(" 下载Go代码生成工具")]),a._v(" "),s("p",[a._v("配置代理，解决依赖下载困难的问题")]),a._v(" "),s("div",{staticClass:"language-shell script line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("go "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("env")]),a._v(" -w "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GO111MODULE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("on\ngo "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("env")]),a._v(" -w "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GOPROXY")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("https://goproxy.cn/,direct\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("然后进行依赖的下载，主要是下载  goctl 用来生成我们的项目")]),a._v(" "),s("div",{staticClass:"language-shell script line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("go get -u github.com/tal-tech/go-zero/tools/goctl\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:"/images/image-20201105154538400.png",alt:"image-20201105154538400"}})]),a._v(" "),s("h2",{attrs:{id:"编写业务代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编写业务代码"}},[a._v("#")]),a._v(" 编写业务代码")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("api文件定义了服务对外暴露的路由，可参考"),s("a",{attrs:{href:"https://github.com/tal-tech/zero-doc/blob/main/doc/goctl.md",target:"_blank",rel:"noopener noreferrer"}},[a._v("api规范"),s("OutboundLink")],1)])]),a._v(" "),s("li",[s("p",[a._v("可以在servicecontext.go里面传递依赖给logic，比如mysql, redis等")])]),a._v(" "),s("li",[s("p",[a._v("在api定义的get/post/put/delete等请求对应的logic里增加业务处理逻辑")])])]),a._v(" "),s("h2",{attrs:{id:"goctl用途"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#goctl用途"}},[a._v("#")]),a._v(" goctl用途")]),a._v(" "),s("ul",[s("li",[a._v("定义api请求")]),a._v(" "),s("li",[a._v("根据定义的api自动生成golang（后端），java（ios & android），typescript")]),a._v(" "),s("li",[a._v("生成MySQL CURD + Cache")]),a._v(" "),s("li",[a._v("生成MongoDB CURD + Cache")])]),a._v(" "),s("h2",{attrs:{id:"goctl使用说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#goctl使用说明"}},[a._v("#")]),a._v(" goctl使用说明")]),a._v(" "),s("h3",{attrs:{id:"快速生成服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#快速生成服务"}},[a._v("#")]),a._v(" 快速生成服务")]),a._v(" "),s("div",{staticClass:"language-shell script line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 生成api服务（类似于单体应用）")]),a._v("\napi: goctl api new xxxx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 生成rpc（类似于微服务）")]),a._v("\nrpc: goctl rpc new xxxx\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("h3",{attrs:{id:"goctl参数说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#goctl参数说明"}},[a._v("#")]),a._v(" goctl参数说明")]),a._v(" "),s("p",[a._v("goctl可以根据api文件生成前端需要的Java、TypeScript、JavaScript代码")]),a._v(" "),s("div",{staticClass:"language-shell script line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("goctl api "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("go/java/ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-api user/user.api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-dir ./src"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("例如")]),a._v(" "),s("div",{staticClass:"language-shell script line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("goctl api java -api greet.api -dir greet\ngoctl api dart -api greet.api -dir greet\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("h2",{attrs:{id:"快速生成api服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#快速生成api服务"}},[a._v("#")]),a._v(" 快速生成api服务")]),a._v(" "),s("p",[a._v("安装好 goctl项目后，我们就可以开始自动生成 项目了")]),a._v(" "),s("div",{staticClass:"language-shell script line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 初始化项目  greet")]),a._v("\n goctl api new greet\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 进入目录 ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" greet\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 读取配置文件运行项目")]),a._v("\ngo run greet.go -f etc/greet-api.yaml\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br")])]),s("p",[a._v("生成后的项目代码如下所示")]),a._v(" "),s("p",[s("img",{attrs:{src:"/images/image-20201107155510495.png",alt:"image-20201107155510495"}})]),a._v(" "),s("p",[a._v("默认侦听在8888端口（可以在配置文件里修改），可以通过url请求：")]),a._v(" "),s("p",[a._v("http://localhost:8888/greet/from/you")]),a._v(" "),s("p",[a._v("如果有以下返回结果，表示项目运行成功~")]),a._v(" "),s("p",[s("img",{attrs:{src:"/images/image-20201105155233095.png",alt:"image-20201105155233095"}})])])}),[],!1,null,null,null);t.default=r.exports}}]);